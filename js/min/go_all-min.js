function go_delete_temp_archive(){var e=go_delete_temp_archive_nonce;console.log("go_delete_temp_archive ");var t={is_frontend:is_frontend,action:"go_delete_temp_archive",_ajax_nonce:e};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:t,error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log("temp directory removed")}})}function go_zip_archive(){console.log("go_zip_archive");var e=go_zip_archive_nonce,t={is_frontend:is_frontend,action:"go_zip_archive",_ajax_nonce:e};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:t,error:function(e,t,o){return console.log("go_zip_archive_error"),"error"},success:function(e){console.log(e),0==e||"0"==e?(Swal.fire({title:"Error",text:"There was a problem creating your archive. Error during the compression process.",type:"error",showCancelButton:!1}),go_delete_temp_archive()):(console.log(e),window.location=e,Swal.fire({title:"Success",text:"Your archive was created.  It should be in your download folder. To view the archive, unzip it and open the index file.",type:"success",showCancelButton:!1}),go_delete_temp_archive())}})}function go_make_store_clickable(){jQuery(".clickable").keyup((function(e){13===e.which&&jQuery("#go_store_pass_button").click()}))}function go_lb_opener(e){var t=jQuery(e).data("post_id");if(console.log("go_lb_opener"),console.log(jQuery(".featherlight.store").length),jQuery(".featherlight.store").length>0)return console.log("already open"),void jQuery(".go_str_item").off().one("click",(function(e){go_lb_opener(this)}));if(jQuery("#light").css("display","block"),jQuery(".go_str_item").prop("onclick",null).off("click"),!jQuery.trim(jQuery("#lb-content").html()).length){var o=GO_EVERY_PAGE_DATA.nonces.go_the_lb_ajax,a={is_frontend:is_frontend,action:"go_the_lb_ajax",_ajax_nonce:o,the_item_id:t};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:a,beforeSend:function(){jQuery("#lb-content").append('<div class="go-lb-loading"></div>')},cache:!1,error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),console.log("success");var o=JSON.parse(e);try{var o=JSON.parse(e)}catch(e){o={json_status:"101",html:""}}if(jQuery("#lb-content").innerHTML="",jQuery("#lb-content").html(""),jQuery.featherlight(o.html,{variant:"store",afterOpen:function(e){console.log("store-fitvids3"),go_fit_and_max_only("#go_store_description")}}),"101"===Number.parseInt(o.json_status)){console.log(101),jQuery("#go_store_error_msg").show();var a="Server Error.";jQuery("#go_store_error_msg").text()!=a?jQuery("#go_store_error_msg").text(a):flash_error_msg_store("#go_store_error_msg")}else 302===Number.parseInt(o.json_status)&&(console.log(302),window.location=o.location);jQuery(".go_str_item").off().one("click",(function(e){go_lb_opener(this)})),jQuery("#go_store_pass_button").one("click",(function(e){go_store_password(t)})),go_max_purchase_limit()}})}}function goBuytheItem(e,t){console.log("goBuytheItem");var o=GO_FRONTEND_DATA.nonces.go_buy_item,a=GO_FRONTEND_DATA.userID,r={_ajax_nonce:o,is_frontend:is_frontend,action:"go_buy_item",the_id:e,qty:jQuery("#go_qty").val(),user_id:a};console.log("goBuytheItem1"),jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:r,beforeSend:function(){jQuery("#golb-fr-buy").innerHTML="",jQuery("#golb-fr-buy").html(""),jQuery("#golb-fr-buy").append('<div id="go-buy-loading" class="buy_gold"></div>')},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log("goBuytheItem2"),go_after_ajax();var t={};try{var t=JSON.parse(e)}catch(e){t={json_status:"101",messages:"",content:"101 Error: Please try again."}}-1!==e.indexOf("Error")?jQuery("#light").html(e):(console.log("show_content"),console.log(t.messages),console.log(t.content),jQuery(".top_content").html(t.content),jQuery(".go_store_actions").remove(),jQuery("body").append(t.messages))}})}function flash_error_msg_store(e){var t=jQuery(e).css("background-color");void 0===typeof t&&(t="white"),jQuery(e).animate({color:t},200,(function(){jQuery(e).animate({color:"red"},200)}))}function go_store_password(e){var t;if(!(jQuery("#go_store_password_result").attr("value").length>0)){jQuery("#go_store_error_msg").show();var o="Please enter a password.";return jQuery("#go_store_error_msg").text()!=o?jQuery("#go_store_error_msg").text(o):flash_error_msg_store("#go_store_error_msg"),void jQuery("#go_store_pass_button").one("click",(function(t){go_store_password(e)}))}var a=jQuery("#go_store_password_result").attr("value");if(jQuery("#light").css("display","block"),!jQuery.trim(jQuery("#lb-content").html()).length){var r=e,s=GO_EVERY_PAGE_DATA.nonces.go_the_lb_ajax,n={is_frontend:is_frontend,action:"go_the_lb_ajax",_ajax_nonce:s,the_item_id:r,skip_locks:!0,result:a};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:n,cache:!1,error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(t){go_after_ajax();var o=JSON.parse(t);try{var o=JSON.parse(t)}catch(e){o={json_status:"101",html:""}}if("101"===Number.parseInt(o.json_status)){console.log(101),jQuery("#go_store_error_msg").show();var a="Server Error.";jQuery("#go_store_error_msg").text()!=a?jQuery("#go_store_error_msg").text(a):flash_error_msg_store("#go_store_error_msg")}else if(302===Number.parseInt(o.json_status))console.log(302),window.location=o.location;else if("bad_password"==o.json_status){jQuery("#go_store_error_msg").show();var a="Invalid password.";jQuery("#go_store_error_msg").text()!=a?jQuery("#go_store_error_msg").text(a):flash_error_msg_store("#go_store_error_msg"),jQuery("#go_store_pass_button").one("click",(function(t){go_store_password(e)}))}else jQuery("#go_store_pass_button").one("click",(function(t){go_store_password(e)})),jQuery("#go_store_lightbox_container").hide(),jQuery(".featherlight-content").html(o.html),go_max_purchase_limit()}})}}function go_max_purchase_limit(){window.go_purchase_limit=jQuery("#golb-fr-purchase-limit").attr("val");var e=go_purchase_limit;jQuery("#go_qty").spinner({max:e,min:1,stop:function(){jQuery(this).change()}}),go_make_store_clickable(),jQuery("#go_store_admin_override").one("click",(function(e){jQuery(".go_store_lock").show(),jQuery("#go_store_admin_override").hide(),go_make_store_clickable()}))}function go_count_item(e){var t=GO_FRONTEND_DATA.nonces.go_get_purchase_count;jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_get_purchase_count",item_id:e},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){if(go_after_ajax(),-1!==e){var t=e.toString();jQuery("#golb-purchased").html("Quantity purchased: "+t)}}})}function go_change_avatar(e){console.log("go_change_avatar"),console.log(e),go_enable_loading(e),jQuery(e).prop("onclick",null).off("click");let t=jQuery("#go_this_avatar").val();var o=GO_FRONTEND_DATA.nonces.go_change_avatar;jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:{_ajax_nonce:o,is_frontend:is_frontend,action:"go_change_avatar",media_id:t},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),-1!==e&&(swal.fire({text:"Your avatar was changed."}),jQuery.featherlight.close(),jQuery(".avatar-64").attr("src",e))}})}function go_start_autosave_timer(){console.log("go_start_autosave_timer"),window.go_autosave_timer=setInterval((function(){go_check_needs_autosave()}),12e4)}function go_check_needs_autosave(){console.log("go_check_needs_autosave"),jQuery(".go_blog_autosave_button").each((function(){var e=jQuery(this),t,o=go_set_required_elements(jQuery(e).closest(".autosave_wrapper")),a=GO_FRONTEND_DATA.nonces.go_blog_autosave,r=jQuery(e).attr("blog_suffix");if("fixed"==jQuery("#go_blog_title"+r).data("blog_post_title"))var s=jQuery("#go_blog_title"+r).html();else""==(s=jQuery("#go_blog_title"+r).val())&&(s="My Blog Post");var n=jQuery(e).attr("button_type"),_=go_get_tinymce_content_blog(r),i=jQuery("#go_blog_title"+r).attr("data-blog_post_id"),l=jQuery(e).attr("data-bonus_status"),c=jQuery(e).attr("status"),u=jQuery(e).attr("task_id"),g=jQuery(e).attr("data-check_for_understanding");if(jQuery("#go_private_post"+r).is(":checked"))var d=1;var p={is_frontend:is_frontend,action:"go_blog_autosave",is_frontend:is_frontend,_ajax_nonce:a,result:_,result_title:s,blog_post_id:i,required_elements:o,blog_private:d,go_blog_task_stage:c,go_blog_bonus_stage:l,post_id:u,button:n,check_for_understanding:g},h=JSON.stringify(p);void 0!==window["last_go_to_send_"+i]&&window["last_go_to_send_"+i]!=h&&go_blog_autosave(p),window["last_go_to_send_"+i]=h}))}function go_blog_autosave(e){console.log("go_blog_autosave"),jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:e,cache:!1,error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){let t;if(console.log("autosave success"),"true"!=go_ajax_error_checker(e)){var o={};try{var o=JSON.parse(e)}catch(e){o={json_status:"101",message:"",blog_post_id:"",wrapper:""}}console.log(o.message)}}})}function go_set_required_elements(e){const t={};return jQuery(e).find(".go_blog_element_input").each((function(){const e=jQuery(this).attr("data-type"),o=jQuery(this).attr("data-uniqueID");if("URL"===e){const e=jQuery(this).val();t[o]=e}if("video"===e){const e=jQuery(this).val().replace(/\s+/,"");t[o]=e}if("file"===e){const e=jQuery(this).attr("value");t[o]=e}if("text"===e){const e=jQuery(this).find(".go_mce_textarea").attr("id");if(e)var a=go_tmce_getContent(e);else var a=jQuery(this).val();t[o]=a}if("sketch"===e){const e=window["sketch"+o].getSnapshot();console.log("sketch"),console.log(e),t[o]=e}})),t}function go_blog_new_posts(e="false"){if(console.log("go_blog_new_posts"),go_lightbox_blog_img(),go_Vids_Fit_and_Box("body"),go_disable_loading(),go_enable_task_buttons(),jQuery("#go_cards").length){var t=jQuery("#go_cards").masonry({itemSelector:".go_blog_post_card_sizer",columnWidth:".go_blog_post_card_sizer"});t.imagesLoaded().progress((function(){t.masonry("layout")}))}jQuery(".go_show_likes_list").off().one("click",(function(e){go_get_likes_list(this)})),jQuery(".go_blog_opener").off().one("click",(function(e){go_blog_opener(this)})),jQuery("#go_read_printed_button").off().on("click",(function(){go_loadmore_reader(this)})),jQuery("input[type=radio][name=loot_option]").on("change",(function(){switch(jQuery(this).val()){case"none":jQuery(this).closest(".messages_form").find(".go_feedback_assign_loot").hide(),jQuery(this).closest(".messages_form").find(".go_feedback_percent_loot").hide();break;case"percent":jQuery(this).closest(".messages_form").find(".go_feedback_assign_loot").hide(),jQuery(this).closest(".messages_form").find(".go_feedback_percent_loot").show();break;case"assign":jQuery(this).closest(".messages_form").find(".go_feedback_assign_loot").show(),jQuery(this).closest(".messages_form").find(".go_feedback_percent_loot").hide();break}})),jQuery(".go_blog_revision").off().one("click",(function(){go_blog_revision(this)})),jQuery(".go_blog_favorite").off().click((function(){go_blog_favorite(this)})),jQuery(".go_blog_trash").off().one("click",(function(e){go_blog_trash(this)})),jQuery(".go_reset_task_stage_blog").off().one("click",(function(){go_messages_opener(this.getAttribute("data-uid"),this.getAttribute("data-task"),"reset_stage",this)})),go_activate_tippy(),jQuery("#go_mark_all_read").off().one("click",(function(){go_loadmore_reader(this)})),jQuery(".go_status_read_toggle").off().one("click",(function(){go_mark_one_read_toggle(this)})),jQuery(".feedback_accordion").accordion({collapsible:!0,active:!1,heightStyle:"content"}),jQuery(".go_send_feedback").off().one("click",(function(){go_send_feedback(this)})),jQuery(".go-acf-switch").off().click((function(){console.log("click"),0==jQuery(this).hasClass("-on")?(jQuery(this).prev("input").prop("checked",!0),jQuery(this).addClass("-on"),jQuery(this).removeClass("-off")):(jQuery(this).prev("input").prop("checked",!1),jQuery(this).removeClass("-on"),jQuery(this).addClass("-off"))})),jQuery(".go_feedback_canned").off().on("change",(function(e){var t;go_feedback_canned(jQuery("option:selected",this))})),jQuery(".feedback_accordion").show("slow"),go_stats_links(),jQuery(".go_quest_reader_lightbox_button").off().one("click",(function(){go_reader_update(this,!0)})),jQuery(".go_blog_post_opener").off().one("click",(function(e){go_blog_post_opener(this)})),jQuery(".go_loadmore_reader").off().one("click",(function(){go_loadmore_reader(this)})),jQuery("#go_num_posts, #go_cards_toggle").off().change((function(){go_num_posts()})),jQuery(".go_str_item").off().one("click",(function(e){go_lb_opener(this)})),"false"===e&&(go_activate_tinymce_on_task_change_stage("go_blog_post"),jQuery(".wp-editor-area").each((function(){var e=jQuery(this).attr("id");console.log("go_mce_id"+e),go_activate_tinymce_on_task_change_stage(e)})))}function go_blog_favorite(e){if(console.log("go_blog_favorite"),blog_post_id=jQuery(e).attr("data-post_id"),jQuery(e).is(":checked"))var t=!0;else t=!1;var o=GO_EVERY_PAGE_DATA.nonces.go_blog_favorite_toggle,a={is_frontend:is_frontend,action:"go_blog_favorite_toggle",_ajax_nonce:o,blog_post_id:blog_post_id,checked:t};jQuery.ajax({url:MyAjax.ajaxurl,is_frontend:is_frontend,type:"POST",data:a,error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax()}})}function task_stage_check_input(e,t,o=!0){console.log("task_stage_check_input"),go_enable_loading(e);var a="";void 0!==jQuery(e).attr("button_type")&&(a=jQuery(e).attr("button_type"),console.log("button_type: "+a));var r="";void 0!==jQuery(e).attr("status")&&(r=jQuery(e).attr("status"));var s="";void 0!==jQuery(e).attr("check_type")&&(s=jQuery(e).attr("check_type"),console.log("Check Type: "+s));var n=!1;jQuery(".go_error_msg").text("");var _='<ul style=" text-align: left;"> ',i=jQuery(e).attr("blog_suffix");if(console.log("suffix: "+i),"blog"==s||"blog_lightbox"==s){const t=jQuery(e).attr("text_toggle");var l=jQuery(e).closest(".autosave_wrapper");if(jQuery(".go_blog_element_error").remove(),jQuery(l).find(".go_blog_element_input").each((function(){console.log("check element");const e=jQuery(this).attr("data-type"),t=jQuery(this).attr("data-uniqueID");if("URL"===e){const e=jQuery(this).attr("data-required"),t="<span class='go_blog_element_error' style='color: red;'><br>Enter a valid URL.</span>",o=jQuery(this).val();console.log("URL"+o),o.length>0?(console.log("1"),!o.match(/^(http:\/\/|https:\/\/).*\..*$/)||o.lastIndexOf("http://")>0||o.lastIndexOf("https://")>0?(_+="<li>Enter a valid URL.</li>",n=!0,jQuery(this).after(t)):"blog"!=s&&"blog_lightbox"!=s||-1==o.indexOf(e)&&(_+='<li>Enter a valid URL. The URL must contain "'+e+'".</li>',n=!0,jQuery(this).after(t))):(_+="<li>Enter a valid URL.</li>",n=!0,jQuery(this).after(t))}if("video"===e){const e=jQuery(this).val().replace(/\s+/,""),t="Enter a valid video URL. YouTube and Vimeo are supported.",o="<span class='go_blog_element_error' style='color: red;'><br>"+t+"</span>";console.log("videoURL"+e),e.length>0?!e.match(/^(http:\/\/|https:\/\/).*\..*$/)||e.lastIndexOf("http://")>0||e.lastIndexOf("https://")>0?(_+="<li>"+t+"</li>",n=!0,jQuery(this).after(o)):-1==e.search("youtu")&&-1==e.search("vimeo")&&(_+="<li>"+t+"</li>",n=!0,jQuery(this).after(o)):(_+="<li>"+t+"</li>",n=!0,jQuery(this).after(o))}if("file"===e){console.log("file result:");const e=jQuery(this).attr("value");console.log(e);const t="<br><span class='go_blog_element_error' style='color: red;'><br>Please attach a file.</span>";void 0===e&&(console.log("undefined"),_+="<li>Please attach a file.</li>",n=!0,jQuery(this).after(t))}if("text"===e){console.log("text result:");const e=jQuery(this).find(".go_mce_textarea").attr("id");if(e)var o=go_tmce_getContent(e);else var o=jQuery(this).val();var a=jQuery(this).data("min_words"),r=tinymce_getContentLength_new(e);if(r<a){const e="<br><span class='go_blog_element_error' style='color: red;'><br>Your answer is not long enough. There must be "+a+" words minimum. You have "+r+" words.</span>";_+="<li>Please check your answers.</li>",n=!0,jQuery(this).after(e)}}})),"1"==t){console.log("MCE wordcount validation");var c=jQuery(e).attr("min_words"),u=tinymce_getContentLength_new(s);u<c&&(_+="<li>Your post is not long enough. There must be "+c+" words minimum. You have "+u+" words.</li>",n=!0)}}else if("password"===s||"unlock"==s){var g;jQuery("#go_result").attr("value").length>0||(_+="Retrieve the password from "+go_task_data.admin_name+".",n=!0)}else if("quiz"==s){var d=jQuery(e).closest(".go_checks_and_buttons").find(" .go_test_list");if(d.length>=1){for(var p=0,h=0;h<d.length;h++){var f="#go_test_container_"+(parseFloat(r)+1)+" .go_test_"+h+" input:checked",y;console.log("obj_str: "+f),jQuery(f).length>=1&&p++}if(p>=d.length)return void go_quiz_check_answers(r,e);d.length>1?(_+="<li>Please answer all questions!</li>",n=!0):(_+="<li>Please answer the question!</li>",n=!0)}}if(console.log("error message"),console.log(_),_+="</ul>",!0===n)return 1==t?(jQuery("#go_blog_stage_error_msg").append(_),jQuery("#go_blog_stage_error_msg").show()):(jQuery("#go_blog_error_msg").append(_),jQuery("#go_blog_error_msg").show()),swal.fire({title:"There are errors with your submission.",html:_,type:"error"}),jQuery(e).closest(".go_checks_and_buttons").find("#go_save_button").trigger("click"),go_disable_loading(),go_enable_task_buttons(),void console.log("disable loading3");if(jQuery("#go_blog_stage_error_msg").hide(),jQuery("#go_blog_error_msg").hide(),1==t){var j=go_set_required_elements(l);task_stage_change(e,j)}else go_blog_submit(e,o)}function go_enable_loading(e){console.log("go_enable_loading");var t=go_loader_html("small");jQuery(e).hasClass("go_button_round")?(jQuery("#stats_tasks").html(t),jQuery(e).find(".go_round_inner").html("<span style='margin-top:7px;'>"+t+"</span>")):(t='<span class="go_loading">'+t+"</span> ",jQuery(e).prepend(t))}function go_disable_loading(){console.log("go_disable_loading"),jQuery(".go_loading").remove(),jQuery("#go_save_button .go_round_inner").html("<i class='fas fa-save'></i>"),jQuery(".go_blog_trash .go_round_inner").html("<i class='fas fa-trash'></i>"),jQuery(".go_blog_post_opener .go_round_inner").html("<i class='fas fa-book-open'></i>"),jQuery(".go_blog_opener_round .go_round_inner").html("<i class='fas fa-pencil-alt'></i>")}function go_enable_task_buttons(){jQuery("#go_back_button").off().one("click",(function(e){task_stage_change(this)})),jQuery("#go_button").off().one("click",(function(e){task_stage_check_input(this,!0)})),jQuery("#go_save_button").off().one("click",(function(e){task_stage_check_input(this,!1,!1)})),jQuery("#go_blog_submit").off().one("click",(function(e){task_stage_check_input(this,!1)})),jQuery("#go_bonus_button").off().one("click",(function(e){go_update_bonus_loot(this)})),jQuery(".progress").closest(".go_checks_and_buttons").addClass("active")}function tinymce_getContentLength_new(e){if("blog_lightbox"==e)var t=go_tmce_getContent("go_blog_post_lightbox");else if("blog"==e)var t=go_tmce_getContent("go_blog_post");else var t=go_tmce_getContent(e);var o=0;if(t){var a=(t=(t=(t=(t=t.replace(/\.\.\./g," ")).replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ")).replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," ")).replace(/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g,"")).match(/[\w\u2019\x27\-\u00C0-\u1FFF]+/g);a&&(o=a.length)}return o}function go_blog_opener(e){if(console.log("go_blog_opener"),Number.isInteger(e))var t=e;else var o=jQuery(e).attr("data-check_for_understanding"),t=jQuery(e).attr("blog_post_id");go_enable_loading(e),jQuery("#go_hidden_mce").remove();var a=GO_FRONTEND_DATA.nonces.go_blog_opener,r={is_frontend:is_frontend,action:"go_blog_opener",_ajax_nonce:a,blog_post_id:t,check_for_understanding:o};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:r,cache:!1,error:function(e,t,o){go_disable_loading(),400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){if(go_after_ajax(),"login"==e&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),"locked"==e)return swal.fire({title:"Locked",html:"This post was created from a task that has since been locked. That task must be unlocked before this blog post can be edited. Click on the blog post title to go to view the task and view the lock.",type:"warning"}),void go_disable_loading();jQuery.featherlight(e,{variant:"autosave_wrapper",afterContent:function(){console.log("aftercontent"),jQuery("body").attr("data-go_blog_saved","0"),jQuery("body").attr("data-go_blog_updated","0"),go_blog_after_ajax(),go_disable_loading(),go_activate_tinymce_on_task_change_stage("go_blog_post_lightbox"),jQuery(".go_result_text_lightbox").each((function(){const e=jQuery(this).find(".go_mce_textarea").attr("id");go_activate_tinymce_on_task_change_stage(e)}))},beforeClose:function(){var e,o;if(console.log("beforeClose"),"1"==jQuery("body").attr("data-go_blog_updated"))return swal.fire({title:"You have unsaved changes.",text:"Would you like to save? If you don't save you will not be able to recover these changes.",type:"warning",showCancelButton:!0,confirmButtonText:"Save and Close",cancelButtonText:"Close without Saving",reverseButtons:!0,customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"}}).then(e=>{e.value?jQuery("#go_save_button_lightbox").length?jQuery("#go_save_button_lightbox").trigger("click"):jQuery("#go_blog_submit").trigger("click"):(Swal.fire("Your changes were not saved."),jQuery("body").attr("data-go_blog_updated","0"),jQuery.featherlight.close())}),!1;(jQuery(".go_blog_post_wrapper_"+t).length=0)&&location.reload()}}),jQuery(".featherlight").css("background","rgba(0,0,0,.8)"),jQuery(".featherlight .featherlight-content").css("width","80%"),go_disable_loading(),jQuery(".go_blog_opener").off().one("click",(function(e){go_blog_opener(this)}))}})}function go_blog_post_opener(e){if(console.log("go_blog_post_opener"),Number.isInteger(e))var t=e;else var t=jQuery(e).attr("blog_post_id");go_enable_loading(e);var o=GO_FRONTEND_DATA.nonces.go_blog_post_opener,a={is_frontend:is_frontend,action:"go_blog_post_opener",_ajax_nonce:o,blog_post_id:t};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:a,cache:!1,error:function(e,t,o){go_disable_loading(),400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),jQuery(".go_blog_post_opener").off().one("click",(function(e){go_blog_post_opener(this)}))},success:function(e){go_after_ajax(),jQuery(".go_blog_post_opener").off().one("click",(function(e){go_blog_post_opener(this)})),"login"==e&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),"locked"!=e&&(jQuery.featherlight(e,{variant:"blog_post",afterContent:function(){go_blog_new_posts()}}),jQuery(".featherlight").css("background","rgba(0,0,0,.8)"),jQuery(".featherlight .featherlight-content").css("width","80%"))}})}function go_blog_after_ajax(){jQuery("#go_result_url_lightbox, #go_result_video_lightbox, .go_result_text_lightbox").change((function(){jQuery("body").attr("data-go_blog_updated","1")})),jQuery(".go_frontend-button").on("click",(function(){jQuery("body").attr("data-go_blog_updated","1")})),jQuery("#go_blog_submit").off().one("click",(function(e){task_stage_check_input(this,!1)}))}function go_blog_submit(e,t){var o,a=go_set_required_elements(jQuery(e).closest(".autosave_wrapper"));console.log("go_blog_submit"),clearInterval(go_autosave_timer);var r=GO_FRONTEND_DATA.nonces.go_blog_submit,s=jQuery(e).attr("blog_suffix"),n;if("fixed"==jQuery("#go_blog_title"+s).data("blog_post_title"))var n=jQuery("#go_blog_title"+s).html();else""==(n=jQuery("#go_blog_title"+s).val())&&(n="My Blog Post");var _=jQuery(e).attr("button_type"),i=go_get_tinymce_content_blog(s);console.log("go_blog_submit2");var l=jQuery("#go_blog_title"+s).attr("data-blog_post_id");console.log("blog_post_id: "+l);var c=jQuery(e).attr("data-bonus_status"),u=jQuery(e).attr("status"),g=jQuery(e).attr("task_id"),d=jQuery(e).attr("data-check_for_understanding");if(jQuery("#go_private_post"+s).is(":checked"))var p=1;console.log("blog_private: "+p);var h={is_frontend:is_frontend,action:"go_blog_submit",_ajax_nonce:r,result:i,result_title:n,blog_post_id:l,required_elements:a,blog_private:p,go_blog_task_stage:u,go_blog_bonus_stage:c,post_id:g,button:_,check_for_understanding:d};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:h,cache:!1,error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),go_start_autosave_timer()},success:function(e){let o;if(go_after_ajax(),console.log("go_blog_submit success"),"true"!=go_ajax_error_checker(e)){var a={};try{var a=JSON.parse(e)}catch(e){a={json_status:"101",message:"",blog_post_id:"",wrapper:""}}if(jQuery("body").attr("data-go_blog_updated","0"),console.log("message"),console.log(a.message),jQuery("body").append(a.message),go_disable_loading(),jQuery("#go_save_button"+s).off().one("click",(function(e){go_blog_submit(this,!1)})),console.log("reload: "+t),1==t){console.log("reload");var r=".go_blog_post_wrapper_"+l,n=jQuery(r).length,_;jQuery.featherlight.current().close(),jQuery(r).length>0?(jQuery(r).replaceWith(a.wrapper),jQuery(".feedback_accordion").accordion({collapsible:!0,active:!1,heightStyle:"content"}),go_blog_new_posts()):location.reload()}else if(console.log("1"),jQuery(".go_blog_form_div").length>0)if(console.log("2"),jQuery(".go_save_button").length>0)if(console.log("3"),jQuery(".go_save_button").attr("blog_post_id").length>0){console.log("4");var i=jQuery(".go_save_button").attr("blog_post_id");i.length>0&&(console.log("5"),a.blog_post_id!=i&&(console.log(l),console.log(i),console.log(i.length),console.log("dont match"),location.reload()))}else console.log("6"),jQuery("#go_save_button"+s).attr("blog_post_id",a.blog_post_id),jQuery("#go_blog_title"+s).attr("data-blog_post_id",a.blog_post_id),jQuery("#go_button").attr("blog_post_id",a.blog_post_id),console.log("blog post id attribute added");else location.reload();else location.reload();go_start_autosave_timer()}}})}function go_blog_trash(e){console.log("go_blog_trash"),go_enable_loading(e),Swal.fire({title:"Are you sure?",text:"Do you really want to delete this post?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0,customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"}}).then(t=>{if(t.value){var o=GO_FRONTEND_DATA.nonces.go_blog_trash,a=jQuery(e).attr("blog_post_id"),r={is_frontend:is_frontend,action:"go_blog_trash",_ajax_nonce:o,blog_post_id:a};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:r,cache:!1,error:function(t,o,a){400===t.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),go_disable_loading(e)},success:function(t){go_after_ajax(),jQuery("body").append(t);var o=".go_blog_post_wrapper_"+a;const r=jQuery("#go_show_private").attr("checked");"checked"==r?jQuery(o).replaceWith(t):jQuery(o).hide(),jQuery(".go_blog_trash").off().one("click",(function(e){go_blog_trash(this)})),swal.fire({text:"Poof! Your post has been deleted!",type:"success"}),go_disable_loading(e)}})}else swal.fire({text:"Your post is safe!"}),go_disable_loading(e)})}function go_get_tinymce_content_blog(e){return console.log("go_get_tinymce_content_blog"),jQuery("#wp-go_blog_post_edit-wrap .wp-editor-area").is(":visible")?jQuery("#wp-go_blog_post_edit-wrap .wp-editor-area").val():go_tmce_getContent("_lightbox"==e?"go_blog_post_lightbox":"go_blog_post")}function go_blog_user_task(e){go_enable_loading(e);var t=jQuery(e).data("user_id"),o=jQuery(e).data("post_id");console.log("blogs!");var a=GO_EVERY_PAGE_DATA.nonces.go_blog_user_task;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:a,is_frontend:is_frontend,action:"go_blog_user_task",uid:t,task_id:o},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(t){go_after_ajax(),go_disable_loading(),jQuery.featherlight(t,{variant:"blogs",afterOpen:function(e){go_blog_new_posts()}}),jQuery(e).off().one("click",(function(){go_blog_user_task(this)}))}})}function go_tmce_getContent(e,t){return void 0===e&&(e=wpActiveEditor),void 0===t&&(t=e),jQuery("#wp-"+e+"-wrap").hasClass("tmce-active")&&tinyMCE.get(e)?tinyMCE.get(e).getContent():jQuery("#"+t).val()}function go_tmce_setContent(e,t,o){return void 0===t&&(t=wpActiveEditor),void 0===o&&(o=t),jQuery("#wp-"+t+"-wrap").hasClass("tmce-active")&&tinyMCE.get(t)?tinyMCE.get(t).setContent(e):jQuery("#"+o).val(e)}function go_tmce_focus(e,t){return void 0===e&&(e=wpActiveEditor),void 0===t&&(t=e),jQuery("#wp-"+e+"-wrap").hasClass("tmce-active")&&tinyMCE.get(e)?tinyMCE.get(e).focus():jQuery("#"+t).focus()}function go_show_private(e){const t=jQuery(e).attr("checked"),o=GO_FRONTEND_DATA.nonces.go_show_private,a=jQuery(e).data("userid");var r=go_loader_html("big");jQuery("#go_wrapper").html(r);const s={is_frontend:is_frontend,action:"go_show_private",_ajax_nonce:o,checked:t,userid:a};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:s,cache:!1,error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),jQuery("#go_wrapper").html(e),jQuery("#go_show_private").one("click",(function(e){go_show_private(this)})),jQuery("#go_wrapper").show(),go_blog_new_posts()}})}function go_activate_tinymce_on_task_change_stage(e,t=null){var o=GO_FRONTEND_DATA.go_is_admin;null===t?t=jQuery("#"+e).closest(".go_blog_element_input").data("toolbar"):"admin"===t&&(t=o);var a="charmap,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,wordcount,go_shortcode_button,go_admin_comment,tma_annotate";if(o){var r="formatselect,bold,italic,bullist,numlist,blockquote,alignleft,aligncenter,alignright,link,spellchecker,fullscreen,wp_adv,go_shortcode_button,go_admin_comment,tma_annotate,tma_annotatedelete,tma_annotatehide";if(t)var r="formatselect,bold,italic,bullist,numlist,blockquote,alignleft,aligncenter,alignright,link,spellchecker,fullscreen,wp_adv,go_shortcode_button,go_admin_comment,tma_annotate,tma_annotatedelete,tma_annotatehide";else var r="formatselect,bold,italic,bullist,numlist,blockquote,alignleft,aligncenter,alignright,link,spellchecker,fullscreen,go_shortcode_button,go_admin_comment,tma_annotate,tma_annotatedelete,tma_annotatehide"}else if(t)var r="formatselect,bold,italic,bullist,numlist,blockquote,alignleft,aligncenter,alignright,link,spellchecker,fullscreen,wp_adv,tma_annotatehide";else var r="bold,italic,bullist,numlist,alignleft,aligncenter,alignright,link,spellchecker,fullscreen,tma_annotatehide";if(t)var s="strikethrough,hr,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help";else var s="";tinymce.execCommand("mceRemoveEditor",!0,e);var n=TMA.myurl+"dev/css/files/annotate.css";quicktags({id:e}),tinymce.init({selector:e,branding:!1,theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table,dl.wp-caption",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table,dl.wp-caption",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table,dl.wp-caption",classes:"alignright"}],strikethrough:{inline:"del"}},relative_urls:!1,
remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:!1,wpeditimage_html5_captions:!0,plugins:a,selector:"#"+e,resize:"vertical",menubar:!1,wpautop:!0,wordpress_adv_hidden:!1,indent:!1,toolbar1:r,toolbar2:s,toolbar3:"",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"id post-type-post post-status-publish post-format-standard",height:"150",content_css:n}),tinyMCE.execCommand("mceAddEditor",!1,e)}function go_highlight_apply_filters(){console.log("go_highlight_apply_filters");var e=jQuery("#go_leaderboard_filters").data("filter_on_change"),t=jQuery("#go_leaderboard_filters").data("type");console.log("filter on change"),console.log(e),e?(console.log(t),"leaderboard"===t?(console.log("Leaderboard Update Now"),go_update_leaderboard()):"blog"==t?(go_reader_update(),console.log("Update Now")):"single_stage"===t&&(go_reader_update(),console.log("Update Now"))):(jQuery(".go_apply_filters").addClass("bluepulse"),jQuery(".go_apply_filters").html('<span class="ui-button-text">Apply Filter<i class="fas fa-filter" aria-hidden="true"></i></span>'))}function go_after_ajax(){jQuery(".go_str_item").off().one("click",(function(e){go_lb_opener(this)})),go_check_attendance()}function go_check_attendance(){console.log("go_check_attendance");var e=GO_EVERY_PAGE_DATA.nonces.go_attendance_check_ajax;jQuery.ajax({type:"GET",url:MyAjax.ajaxurl,data:{_ajax_nonce:e,action:"go_attendance_check_ajax",is_frontend:is_frontend},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log("go_check_attendance SUCCESS"),go_check_messages_ajax(),jQuery("body").append(e)}})}function go_show_clone_buttons(){jQuery(".go_actions_wrapper").toggle(),jQuery(".go_actions_wrapper_flex").toggle()}function go_activate_tippy(){console.log("go_activate_tippy"),tippy(".tooltip",{delay:0,arrow:!0,arrowType:"round",size:"large",duration:300,animation:"scale",zIndex:999999,placement:"top"}),tippy(".tooltip_click",{trigger:"click",delay:0,arrow:!0,arrowType:"round",size:"large",duration:300,animation:"scale",zIndex:999999,placement:"top"}),tippy(".actiontip",{delay:0,arrow:!0,arrowType:"round",size:"large",duration:[300,0],animation:"scale",zIndex:9999999,placement:"top"})}function go_new_task_from_template(e){tippyInstances.forEach(e=>{e.hide()}),console.log("go_new_task_from_template");var t=GO_FRONTEND_DATA.nonces.go_new_task_from_template,o=jQuery(e).data("frontend_edit"),a=jQuery(e).data("chain_id"),r=jQuery(e).data("chain_name");jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,action:"go_new_task_from_template",frontend_edit:o,chain_id:a,chain_name:r},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){let t;"true"!=go_ajax_error_checker(e)&&-1!==e&&(console.log(e),e&&(console.log(e),jQuery.featherlight.close(),jQuery.featherlight(e),jQuery(".go_new_task_from_template_button").one("click",(function(){go_clone_post_new_menu_bar(this)}))))}})}function go_clone_post_new_menu_bar(e){console.log("go_clone_post_new_menu_bar");let t=jQuery(".go_new_task_from_template").val(),o=jQuery(".go_new_task_from_template ."+t).data("global"),a=jQuery(e).data("chain_id"),r=jQuery(e).data("frontend_edit");var s=GO_EVERY_PAGE_DATA.nonces.go_clone_post_new_menu_bar;jQuery.ajax({type:"GET",url:MyAjax.ajaxurl,data:{_ajax_nonce:s,action:"go_clone_post_new_menu_bar",is_frontend:is_frontend,post:t,chain_id:a,global:o,frontend_edit:r},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){let t;if(console.log(e),"true"!=go_ajax_error_checker(e)&&-1!==e){var o=jQuery.parseJSON(e);console.log(o),"true"==o.redirect?window.location.href=o.link:go_edit_frontend(null,o.post_id,!0)}}})}function go_activate_password_checker(){console.log("go_activate_password_checker"),jQuery(document).ready((function(){jQuery("#acf-field_5cd3638830f17").length&&jQuery(".acf-form-submit .acf-button").attr("disabled",!0).css("cursor","default").css("opacity",".5")})),jQuery("body").on("keyup",".newpassword, .confirmpassword",(function(e){wdmChkPwdStrength(jQuery("#newpassword input"),jQuery("#confirmpassword input"),jQuery(".password-strength"),jQuery(".acf-form-submit .acf-button"),["admin","happy","hello","1234"])}))}function go_update_password_lightbox(){console.log("go_update_password_lightbox"),jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{action:"go_update_password_lightbox",is_frontend:is_frontend},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),jQuery(".featherlight-content #go_password_change").off().one("click",(function(e){go_update_password()}))},success:function(e){let t;"true"!=go_ajax_error_checker(e)&&-1!==e&&(e&&(jQuery("#go_password_change_lightbox").html(e),console.log("open lightbox"),jQuery.featherlight(jQuery(".go_password_change_container"),{afterContent:function(){jQuery("#go_password_change_lightbox").empty(),jQuery(".featherlight-content").find('a, input[type!="hidden"], select, textarea, iframe, button:not(.featherlight-close), iframe, [contentEditable=true]').each((function(e){0===e&&jQuery(this).prop("autofocus",!0),jQuery(this).prop("tabindex",0)})),go_activate_password_checker()},afterClose:function(){jQuery(".acf-form-submit .acf-button").removeAttr("disabled")}})),jQuery(".go_password_change_modal").one("click",(function(e){go_update_password_lightbox()})))}})}function wdmChkPwdStrength(e,t,o,a,r){console.log("wdmChkPwdStrength");var s=e.val(),n=t.val();r=r.concat(wp.passwordStrength.userInputBlacklist()),a.attr("disabled","disabled"),console.log("disabled"),o.removeClass("short bad good strong"),a.css("cursor","default"),a.css("opacity",".5");var _=wp.passwordStrength.meter(s,r,n);let i=4;switch(_){case 2:o.addClass("bad").html(pwsL10n.bad);break;case 3:o.addClass("good").html(pwsL10n.good);break;case 4:o.addClass("strong").html(pwsL10n.strong);break;case 5:o.addClass("short").html(pwsL10n.mismatch);break;default:o.addClass("short").html(pwsL10n.short)}return console.log("pws: "+_),_>=4&&_<5&&""!==n.trim()&&(console.log("enable"),a.removeAttr("disabled"),a.css("cursor","pointer"),a.css("opacity","1")),_}function go_update_password(){console.log("go_update_password");var e=jQuery(".featherlight-content input[name=currentpassword]").val(),t=jQuery(".featherlight-content input[name=newpassword]").val(),o=jQuery(".featherlight-content input[name=confirmpassword]").val();jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{action:"go_update_password",is_frontend:is_frontend,current_password:e,new_password:t,confirm_password:o},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),jQuery(".featherlight-content #go_password_change").off().one("click",(function(e){go_update_password()}))},success:function(e){let t;go_after_ajax(),console.log(e),"true"!=go_ajax_error_checker(e)&&-1!==e&&("success"==e?(console.log("password changed"),jQuery.featherlight.close(),swal.fire({text:"Your password was changed."})):"current_password_invalid"==e&&(swal.fire({text:"The current password entered is invalid.",type:"error"}),jQuery(".featherlight-content #go_password_change").off().one("click",(function(e){go_update_password()}))))}})}function go_ajax_error_checker(e){return"login"==e?(console.log("not logged in"),jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),"true"):"refresh"===e?(console.log("nonce verify failed"),Swal.fire({title:"Error",text:"Refresh the page and then try again? You will lose unsaved changes. You can cancel and copy any unsaved changes to a safe location before refresh.",type:"warning",confirmButtonText:"Refresh Now",reverseButtons:!0,customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"}}).then(e=>{e.value&&location.reload()}),"true"):void 0}function go_user_profile_link(e){console.log("go_user_profile_link"),jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{action:"go_user_profile_link",is_frontend:is_frontend,uid:e},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),window.open(e)}})}function go_noty_close_oldest(){Noty.setMaxVisible(6);var e=jQuery("#noty_layout__topRight > div").length;0==e&&jQuery("#noty_layout__topRight").remove(),e>=5&&jQuery("#noty_layout__topRight > div").first().trigger("click")}function go_lightbox_blog_img(){console.log("go_lightbox_blog_img"),jQuery("[class*= wp-image]").each((function(){var e=jQuery(this).hasClass("size-full");if(console.log("fullsize:"+e),1==e)var t=jQuery(this).attr("src");else{var o=jQuery(this).attr("class");console.log(o);var a=/.*wp-image/,r=o.replace(a,"wp-image"),s=jQuery(this).attr("src");console.log(s);var n=/-([^-]+).$/,_=/\.[0-9a-z]+$/i,i=s.match(_),t=s.replace(n,i);console.log(t)}jQuery(this).featherlight(t)})),jQuery(".gallery img").each((function(){var e;if(1==jQuery(this).hasClass("size-full"))var t=jQuery(this).attr("src");else{var o=jQuery(this).attr("src");console.log(o);var a=o.substr(0,o.lastIndexOf("/")),r=o.substring(o.lastIndexOf("/")+1),s=/-([^-]+).$/,n=/\.[0-9a-z]+$/i,_=r.match(n),i,t=a+"/"+r.replace(s,_)}var l=jQuery(this).parent().attr("href");void 0!==l&&!1!==l?jQuery(this).parent().attr("href",t):jQuery(this).parent().wrap("<a href='"+t+"'></a>")}));var e=0,t="gallery",o="";jQuery(".gallery").each((function(t,a){o="gallery_"+ ++e,jQuery(a).find("a").featherlightGallery({})}))}function go_stats_lightbox_page_button(e){console.log("go_stats_lightbox_page_button");var t=GO_EVERY_PAGE_DATA.nonces.go_stats_lightbox;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_stats_lightbox",uid:e},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){let t;console.log("go_stats_lightbox_page_button SUCCESS"),go_after_ajax(),"true"!=go_ajax_error_checker(e)&&-1!==e&&(jQuery.featherlight(e,{variant:"stats",afterClose:function(e){jQuery(".go_user_bar_stats").blur(),jQuery("body").focus()}}),jQuery("#stats_tabs").tabs(),jQuery(".stats_tabs").click((function(){switch(console.log("tabs"),tab=jQuery(this).attr("tab"),tab){case"about":break;case"tasks":go_stats_task_list();break;case"store":go_stats_store_list();break;case"history":go_stats_activity_list();break;case"messages":go_stats_messages();break;case"badges":go_stats_badges_list();break;case"groups":go_stats_groups_list();break}})),go_stats_links(),go_blog_new_posts(),jQuery(".go_grade_scales").off().one("click",(function(){go_print_grade_scales(this)})),jQuery("#stats_badges").length?go_stats_badges_list():jQuery("#stats_tasks").length&&go_stats_task_list())}})}function go_print_grade_scales(e){console.log("go_print_grade_scales");var t=GO_EVERY_PAGE_DATA.nonces.go_print_grade_scales;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_print_grade_scales"},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(t){jQuery(e).off().one("click",(function(){go_print_grade_scales(this)})),go_after_ajax(),-1!==t&&jQuery.featherlight(t,{variant:"go_print_grade_scales",afterContent:function(){}})}})}function go_stats_links(){jQuery(".go_user_link_stats").off().one("click",(function(){let e;go_stats_lightbox_page_button(jQuery(this).attr("uid"))})),jQuery(".go_stats_messages_icon").off().one("click",(function(e){var t;go_messages_opener(this.getAttribute("data-uid"),null,"single_message",this)})),jQuery(".go_user_map").off().one("click",(function(e){go_user_map(this)}))}function go_make_select2_filter(e,t,o=!1,a=!1,r=null,s=null){console.log("go_make_select2_filter");var r=jQuery("#go_"+t+"_"+e+"_select").data("value"),s=jQuery("#go_"+t+"_"+e+"_select").data("value_name");if(o){if(null==r)var n=localStorage.getItem(e),_=localStorage.getItem(e+"_name");else var n=r,_=s;"undefined"!=n&&"undefined"!=_&&""!=n&&""!=_&&"null"!=n?(r=n,s=_):(r="",s="")}if(null!=r&&"null"!=r){var i=jQuery("#go_"+t+"_"+e+"_select"),l=new Option(s,r,!0,!0);i.append(l).trigger("change.select2")}jQuery("#go_"+t+"_"+e+"_select").on("select2:unselecting",(function(o){jQuery("#go_"+t+"_"+e+"_select").val(null).trigger("change"),jQuery("#go_"+t+"_"+e+"_select").empty(),jQuery("#go_"+t+"_"+e+"_select").hasClass("go_activate_filter")&&go_highlight_apply_filters()})),jQuery("#go_"+t+"_"+e+"_select").select2({ajax:{url:MyAjax.ajaxurl,dataType:"json",delay:400,data:function(t){return{q:t.term,is_frontend:is_frontend,action:"go_make_taxonomy_dropdown_ajax",taxonomy:e,parents_only:a}},processResults:function(o){console.log("processing"),jQuery("#go_"+t+"_"+e+"_select").off();var a=jQuery("#go_"+t+"_"+e+"_select").val();return console.log(a),jQuery("#go_"+t+"_"+e+"_select").select2("destroy"),jQuery("#go_"+t+"_"+e+"_select").empty(),jQuery("#go_"+t+"_"+e+"_select").select2({data:o,placeholder:"Show All",allowClear:!0}),jQuery("#go_"+t+"_"+e+"_select").val(a).trigger("change"),jQuery("#go_"+t+"_"+e+"_select").select2("open"),jQuery("#go_"+t+"_"+e+"_select").hasClass("go_activate_filter")&&(jQuery("#go_"+t+"_"+e+"_select").on("select2:select",(function(e){console.log("apply_filters"),go_highlight_apply_filters()})),jQuery("#go_"+t+"_"+e+"_select").on("select2:unselect",(function(e){go_highlight_apply_filters()}))),{results:o}},success:function(e){go_after_ajax()},cache:!0},minimumInputLength:0,multiple:!1,placeholder:"Show All",allowClear:!0})}function go_make_select2_cpt(e,t){jQuery(e).select2({ajax:{url:MyAjax.ajaxurl,dataType:"json",delay:400,data:function(e){return{q:e.term,is_frontend:is_frontend,action:"go_make_cpt_select2_ajax",cpt:t}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,o){t.push({id:o[0],text:o[1]})})),{results:t}},cache:!1},minimumInputLength:1,multiple:!0,placeholder:"Show All"})}function go_loader_html(e){var t=PluginDir.url+"media/images/spinner-solid.svg",o=PluginDir.url+"media/images/30.svg";if("big"==e)var a,r="<div id='loader_container' class='go_loader_container'><div id='loader'><img style='height: "+(a=75)+"px;' class='go_loader fa-pulse' src='"+t+"'></div></div>";else if("tiny"==e)var a,r="<img style='height: "+(a=15)+"px; margin-top: 7px;' class='go_loader fa-pulse' src='"+t+"'>";else if("fountain"===e)var r="<div id='loader_container' class='go_loader_container'><img class='' src='"+o+"'></div>";else var a,r="<img style='height: "+(a=25)+"px; margin-top: 7px;' class='go_loader fa-pulse' src='"+t+"'>";return r}function go_stats_task_list(){if(console.log("go_stats_task_list"),0==jQuery("#go_tasks_datatable").length){var e=go_loader_html("big");jQuery("#stats_tasks").html(e);var t=GO_EVERY_PAGE_DATA.nonces.go_stats_task_list;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_stats_task_list",user_id:jQuery("#go_stats_hidden_input").val()},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),console.log("SUCCESS go_stats_task_list"),-1!==e&&(jQuery("#stats_tasks").html(e),jQuery("#go_tasks_datatable").dataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_tasks_dataloader_ajax",data:function(e){e.user_id=jQuery("#go_stats_hidden_input").val()}},responsive:!0,autoWidth:!1,columnDefs:[{targets:"_all",orderable:!1}],searching:!0,drawCallback:function(e){go_enable_reset_buttons(),jQuery(".go_blog_user_task").off().one("click",(function(){go_blog_user_task(this)}))},order:[[3,"desc"]]})),go_reset_opener(null)}})}else jQuery("#go_task_list").show(),jQuery("#go_task_list_single").hide()}function go_enable_reset_buttons(){jQuery(".go_reset_task_clipboard").prop("onclick",null).off("click"),jQuery(".go_reset_task_clipboard").one("click",(function(){go_messages_opener(this.getAttribute("data-uid"),this.getAttribute("data-task"),"single_reset",this)})),jQuery(".go_tasks_reset_multiple_clipboard").parent().prop("onclick",null).off("click"),jQuery(".go_tasks_reset_multiple_clipboard").parent().one("click",(function(){go_messages_opener(null,null,"multiple_reset",this)}))}function go_close_single_history(){jQuery("#go_task_list").show(),jQuery("#go_task_list_single").hide()}function go_stats_single_task_activity_list(e){var t=GO_EVERY_PAGE_DATA.nonces.go_stats_single_task_activity_list;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_stats_single_task_activity_list",user_id:jQuery("#go_stats_hidden_input").val(),postID:e},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),-1!==e&&(jQuery("#go_task_list_single").remove(),jQuery("#go_task_list").hide(),jQuery("#stats_tasks").append(e),jQuery("#go_single_task_datatable").dataTable({bPaginate:!0,order:[[0,"desc"]],responsive:!0,autoWidth:!1}))}})}function go_stats_store_list(){if(0==jQuery("#go_store_datatable").length){var e=go_loader_html("big");jQuery("#stats_store").html(e);var t=GO_EVERY_PAGE_DATA.nonces.go_stats_store_list;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_stats_store_list",user_id:jQuery("#go_stats_hidden_input").val()},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),-1!==e&&(jQuery("#stats_store").html(e),jQuery("#go_store_datatable").dataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_stats_store_item_dataloader",data:function(e){e.user_id=jQuery("#go_stats_hidden_input").val()}},responsive:!0,autoWidth:!1,columnDefs:[{targets:"_all",orderable:!1}],searching:!0,order:[[0,"desc"]]}))}})}}function go_actions_tooltip(){var e;void 0===window.tippyInstances&&(window.tippyInstances=[]),"true"===sessionStorage.getItem("map_actions")&&jQuery(".go_show_actions").each((function(){if(jQuery(this).find(".actions_tooltip").length){const e=tippy(this,{content(e){const t=e.getElementsByClassName("actions_tooltip")[0];if(void 0!==t){let e;return t.getElementsByClassName("my_tooltip")[0].innerHTML}},interactive:!0,arrow:!0,delay:[500,0],theme:"light",placement:"top",flip:!1,followCursor:"initial",zIndex:9999999,onCreate(e){},onMount(e){},onShown(e){go_tooltip_callback()}});void 0!==e&&(window.tippyInstances=tippyInstances.concat(e))}}))}function go_tooltip_callback(){jQuery(".go_clone_icon").off().one("click",(function(){go_importer(this)})),jQuery(".go_quest_reader_lightbox_button").off().one("click",(function(){go_reader_update(this,!0)})),jQuery(".go_quests_frontend").off().one("click",(function(){go_quests_frontend(this)})),jQuery(".go_quick_edit_show").off().one("click",(function(){go_quick_edit_show(this)})),jQuery(".go_edit_frontend").off().one("click",(function(){go_edit_frontend(this)})),jQuery(".go_edit_frontend_post").off().one("click",(function(){go_new_task_from_template(this)})),jQuery(".go_trash_post").off().one("click",(function(){go_trash_post(this)})),go_activate_tippy()}function go_stats_activity_list(){if(console.log("go_stats_activity_list"),0==jQuery("#go_activity_datatable").length){var e=go_loader_html("big");jQuery("#stats_history").html(e);var t=GO_EVERY_PAGE_DATA.nonces.go_stats_activity_list;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_stats_activity_list",user_id:jQuery("#go_stats_hidden_input").val()},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),-1!==e&&(jQuery("#stats_history").html(e),jQuery("#go_activity_datatable").dataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_activity_dataloader_ajax",data:function(e){e.user_id=jQuery("#go_stats_hidden_input").val()}},responsive:!0,autoWidth:!1,columnDefs:[{targets:"_all",orderable:!1}],searching:!0,order:[[0,"desc"]],drawCallback:function(e){go_activate_tippy()}}))}})}}function go_stats_messages(){if(0==jQuery("#go_messages_datatable").length){var e=go_loader_html("big");jQuery("#stats_messages").html(e);var t=GO_EVERY_PAGE_DATA.nonces.go_stats_messages;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_stats_messages",user_id:jQuery("#go_stats_hidden_input").val()},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),-1!==e&&(jQuery("#stats_messages").html(e),jQuery("#go_messages_datatable").dataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_messages_dataloader_ajax",data:function(e){e.user_id=jQuery("#go_stats_hidden_input").val()}},responsive:!0,autoWidth:!1,columnDefs:[{targets:"_all",orderable:!1}],searching:!0,order:[[0,"desc"]],drawCallback:function(e){go_lightbox_blog_img()}}))}})}}function go_stats_badges_list(){if(0===jQuery("#stats_badges #go_badges_list").length){var e=GO_EVERY_PAGE_DATA.nonces.go_stats_badges_list,t=go_loader_html("big");jQuery("#stats_badges").html(t),console.log("go_stats_badges_list"),jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:e,is_frontend:is_frontend,action:"go_stats_badges_list",user_id:jQuery("#go_stats_hidden_input").val()},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),-1!==e&&(jQuery("#stats_badges").html(e),go_activate_tippy())}})}}function go_setup_badges_page(){if(console.log("go_setup_badges"),go_activate_tippy(),go_actions_tooltip(),go_disable_tooltips(!0),jQuery(".go_edit_frontend_badge").off().one("click",(function(){go_edit_frontend(this)})),jQuery("#stats_badges_page").hasClass("sortable")){for(var e=document.getElementsByClassName("go_stats_badges"),t=0;t<e.length;t++){var o=e[t];new Sortable(o,{animation:150,onUpdate:function(e){console.log("update badge group order"),console.log(e);var t=e.item,o=e.from;console.log(t),console.log(o);var a=[];jQuery(o).find(".parent_cat").each((function(){var e=jQuery(this).data("term_id");a.push(e)})),console.log("terms"),console.log(a);var r=GO_EVERY_PAGE_DATA.nonces.go_update_chain_order;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:r,action:"go_update_chain_order",terms:a,taxonomy:"go_badges"},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log(e),"success"!==e&&swal.fire({type:"warning",title:"There was a problem updating the order.",text:"The page will be updated and then you can try again.",confirmButtonText:"Refresh",timer:15e3}).then(e=>{location.reload()})}})}})}for(var e=document.getElementsByClassName("badges_row"),t=0;t<e.length;t++){var o=e[t];new Sortable(o,{group:"shared",animation:150,onAdd:function(e){console.log("update task order Add");var t=e.item,o=e.to,a=e.from;go_update_badge_group_sort(o)},onRemove:function(e){console.log("update task order Remove");var t=e.item,o=e.to,a;go_update_badge_group_sort(e.from)},onUpdate:function(e){console.log("update task order update");var t=e.item,o=e.to,a;go_update_badge_group_sort(e.from)}})}}}function go_stats_groups_list(){if(console.log("go_stats_groups_list"),0==jQuery("#stats_badges #go_groups_list").length){var e=GO_EVERY_PAGE_DATA.nonces.go_stats_groups_list,t=go_loader_html("big");jQuery("#stats_groups").html(t),jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:e,is_frontend:is_frontend,action:"go_stats_groups_list",user_id:jQuery("#go_stats_hidden_input").val()},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),console.log(e),-1!==e&&(jQuery("#stats_groups").html(e),go_activate_tippy())}})}}function go_setup_groups_page(){if(go_activate_tippy(),go_actions_tooltip(),go_disable_tooltips(!0),jQuery(".go_edit_frontend_badge").off().one("click",(function(){go_edit_frontend(this)})),jQuery("#stats_groups_page").hasClass("sortable")){var e=document.getElementById("go_groups");console.log(e),new Sortable(e,{animation:150,onUpdate:function(e){console.log("update badge group order"),console.log(e);var t=e.item,o=e.from;console.log(t),console.log(o);var a=[];jQuery(o).find(".parent_cat").each((function(){var e=jQuery(this).data("term_id");a.push(e)})),console.log("terms"),console.log(a);var r=GO_EVERY_PAGE_DATA.nonces.go_update_chain_order;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:r,action:"go_update_chain_order",terms:a,taxonomy:"user_go_groups"},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log(e),"success"!==e&&swal.fire({type:"warning",title:"There was a problem updating the order.",text:"The page will be updated and then you can try again.",confirmButtonText:"Refresh",timer:15e3}).then(e=>{location.reload()})}})}});for(var t=document.getElementsByClassName("badges_row"),o=0;o<t.length;o++){var e=t[o];new Sortable(e,{group:"shared",animation:150,onAdd:function(e){console.log("update task order Add");var t=e.item,o=e.to,a=e.from;go_update_badge_group_sort(o)},onRemove:function(e){console.log("update task order Remove");var t=e.item,o=e.to,a;go_update_badge_group_sort(e.from)},onUpdate:function(e){console.log("update task order update");var t=e.item,o=e.to,a;go_update_badge_group_sort(e.from)}})}}}function go_date_loader(e,t,o){1==o?(e=moment(),t=moment()):go_highlight_apply_filters(),jQuery("#go_datepicker").html(e.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}function go_load_daterangepicker(e){console.log(e),console.log("go_load_daterangepicker"),jQuery("#go_datepicker_clipboard").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},startDate:moment(),endDate:moment(),opens:"center",locale:{cancelLabel:"Clear"}},(function(e,t,o){console.log("New date range selected: "+e.format("YYYY-MM-DD")+" to "+t.format("YYYY-MM-DD")+" (predefined range: "+o+")"),go_date_loader(e,t,!1)})),jQuery("#go_datepicker_clipboard").on("cancel.daterangepicker",(function(e,t){jQuery("#go_datepicker_clipboard span").html("")})),go_date_loader(null,null,!0)}function go_load_daterangepicker_empty(){console.log("go_load_daterangepicker_empty"),jQuery("#go_datepicker_clipboard").daterangepicker({autoUpdateInput:!1,locale:{cancelLabel:"Clear"}}),jQuery("#go_datepicker_clipboard").on("apply.daterangepicker",(function(e,t){jQuery("#go_datepicker_clipboard span").html(t.startDate.format("MM/DD/YYYY")+" - "+t.endDate.format("MM/DD/YYYY"))})),jQuery("#go_datepicker_clipboard").on("cancel.daterangepicker",(function(e,t){jQuery("#go_datepicker_clipboard span").html("")}))}function go_setup_filter_buttons(e){console.log("go_setup_filter_buttons"),jQuery("#go_task_select, #go_store_item_select").on("select2:select",(function(e){go_highlight_apply_filters()})),jQuery("#go_task_select, #go_store_item_select").on("select2:unselect",(function(e){go_highlight_apply_filters()})),jQuery(".go_reader_input").change((function(){go_highlight_apply_filters()})),jQuery(".go_reset_filters").on("click",(function(){jQuery("#datepicker_clipboard span").html(""),jQuery("#go_reader_user_go_sections_select, #go_reader_user_go_groups_select, #go_reader_go_badges_select, #go_task_select, #go_store_item_select").val(null).trigger("change"),go_highlight_apply_filters()})),jQuery(".go_reset_filters").on("click",(function(){jQuery("#go_datepicker").html(""),jQuery("#go_reader_user_go_sections_select, #go_reader_user_go_groups_select, #go_reader_go_badges_select, #go_task_select, #go_store_item_select").val(null).trigger("change"),e&&(jQuery("#go_reader_read, #go_reader_reset, #go_reader_trash, #go_reader_draft").prop("checked",!1),jQuery("#go_reader_unread").prop("checked",!0),jQuery("#go_reader_order_oldest").prop("checked",!0),jQuery("#go_posts_num").val("10")),go_highlight_apply_filters()})),e&&jQuery("#go_leaderboard_filters").css("display","flex"),go_daterange_clear()}function go_daterange_clear(){jQuery("#go_reset_datepicker").on("click",(function(e){e.stopPropagation(),jQuery("#go_datepicker_container").html('<div id="go_datepicker_clipboard"><i class="fas fa-calendar" style="float: left;"></i><span id="go_datepicker"></span> <i id="go_reset_datepicker" class=""select2-selection__clear><b>  </b></i><i class="fa fa-caret-down"></i></div>'),jQuery("#go_reset_datepicker").hide(),jQuery("#go_datepicker_container").one("click",(function(){go_load_daterangepicker("go_daterange_clear"),jQuery("#go_reset_datepicker").show(),go_daterange_clear()})),go_highlight_apply_filters()}))}function go_copy_to_clipboard(e){console.log("go_copy_to_clipboard");var t=jQuery(e).find(".go_copy_this").html(),o=document.createElement("textarea");document.body.appendChild(o),o.value=t,o.select(),document.execCommand("copy"),document.body.removeChild(o),document.querySelectorAll(".tippy-popper").forEach(e=>{setTimeout((function(){e._tippy.hide()}),1e3)})}function go_save_filters(e){console.log("go_save_filters");var t=e;"clipboard"==e&&(e="reader");var o=jQuery("#go_"+e+"_user_go_sections_select").val(),a=jQuery("#go_"+e+"_user_go_sections_select option:selected").text(),r=jQuery("#go_"+e+"_user_go_groups_select").val(),s=jQuery("#go_"+e+"_user_go_groups_select option:selected").text(),n=jQuery("#go_"+e+"_go_badges_select").val(),_=jQuery("#go_"+e+"_go_badges_select option:selected").text();localStorage.setItem("user_go_sections",""),localStorage.setItem("go_badges",""),localStorage.setItem("user_go_groups",""),localStorage.setItem("user_go_sections_name",""),localStorage.setItem("go_badges_name",""),localStorage.setItem("user_go_groups_name",""),document.cookie="user_go_sections="+o+"; expires = Thu, 01 Jan 2037 00:00:00 GMT; path=/",document.cookie="go_badges="+n+"; expires = Thu, 01 Jan 2037 00:00:00 GMT; path=/",document.cookie="user_go_groups="+r+"; expires = Thu, 01 Jan 2037 00:00:00 GMT; path=/",document.cookie="user_go_sections_name="+a+"; expires = Thu, 01 Jan 2037 00:00:00 GMT; path=/",document.cookie="go_badges_name="+_+"; expires = Thu, 01 Jan 2037 00:00:00 GMT; path=/",document.cookie="user_go_groups_name="+s+"; expires = Thu, 01 Jan 2037 00:00:00 GMT; path=/"}function go_update_badges_page(){console.log("go_update_badges_page");var e=go_loader_html("big"),t=GO_EVERY_PAGE_DATA.nonces.go_update_badges_page,o=jQuery(".go_page_container").data("taxonomy");"go_badges"===o?jQuery("#stats_badges_page").html(e):"go_groups"===o&&jQuery("#stats_groups_page").html(e),jQuery.ajax({type:"POST",url:MyAjax.ajaxurl,data:{is_frontend:is_frontend,action:"go_update_badges_page",taxonomy:o,_ajax_nonce:t},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),console.log("success!"),"go_badges"===o?(jQuery("#stats_badges_page").html(e),
go_setup_badges_page()):"user_go_groups"===o&&(jQuery("#stats_groups_page").html(e),go_setup_groups_page())}})}function go_activate_reader(e=!1){go_blog_new_posts(),go_make_select2_filter("user_go_sections","reader",!0),go_make_select2_filter("user_go_groups","reader",!0),go_make_select2_filter("go_badges","reader",!0),go_make_select2_cpt("#go_task_select","tasks"),go_setup_filter_buttons(!0),jQuery(".go_apply_filters").off().one("click",(function(){go_reader_update()})),go_load_daterangepicker("go_activate_reader"),jQuery("#go_datepicker_container").html('<div id="go_datepicker_clipboard"><i class="fas fa-calendar" style="float: left; line-height: 1.5em;"></i><span id="go_datepicker"></span> <i id="go_reset_datepicker" class=""select2-selection__clear><b>  </b></i><i class="fa fa-caret-down"></i></div>'),jQuery("#go_reset_datepicker").hide(),jQuery("#go_datepicker_container").one("click",(function(){go_load_daterangepicker("go_activate_reader"),jQuery("#go_reset_datepicker").show(),go_daterange_clear(),go_highlight_apply_filters()})),jQuery("#go_num_posts, #go_cards_toggle").off().change((function(){go_num_posts()})),jQuery("#go_show_all_feed").off().change((function(){go_reader_update()}))}function go_reader_update(e,t=!1){console.log("go_reader_update"),console.log(e),jQuery(".go_apply_filters").removeClass("bluepulse");var o=jQuery("#go_leaderboard_filters").data("user_id"),a=jQuery("#go_leaderboard_filters").data("type");if(console.log("Get task ID"),void 0!==jQuery(e).data("post_id")){console.log("Get task ID1");var r=jQuery(e).data("post_id"),s=jQuery(e).data("stage")}else{console.log("Get task ID2");var r=jQuery("#go_task_select").val(),s=jQuery("#go_leaderboard_filters").data("stage");go_save_filters("reader")}jQuery(".go_apply_filters").html('<span class="ui-button-text">Refresh Data <span class="dashicons dashicons-update" style="vertical-align: center;"></span></span>');var n=jQuery("#go_datepicker_clipboard span").html(),_=jQuery("#go_reader_published").prop("checked"),i=jQuery("#go_reader_unread").prop("checked"),l=jQuery("#go_reader_read").prop("checked"),c=jQuery("#go_reader_reset").prop("checked"),u=jQuery("#go_reader_trash").prop("checked"),g=jQuery("#go_reader_draft").prop("checked"),d=jQuery("input[name='go_reader_order']:checked").val(),p=jQuery("#go_num_posts").val();if(t)var h=localStorage.getItem("user_go_sections"),f=localStorage.getItem("user_go_groups"),y=localStorage.getItem("go_badges");else var h=jQuery("#go_reader_user_go_sections_select").val(),f=jQuery("#go_reader_user_go_groups_select").val(),y=jQuery("#go_reader_go_badges_select").val();var j=jQuery("#social_tabs").find("[aria-selected='true']").attr("aria-controls"),m=jQuery("#go_show_all_feed").is(":checked"),b=GO_FRONTEND_DATA.nonces.go_filter_reader,Q=go_loader_html("big");jQuery("#go_posts_wrapper").html(Q),jQuery.ajax({url:MyAjax.ajaxurl,type:"GET",data:{_ajax_nonce:b,is_frontend:is_frontend,action:"go_filter_reader",date:n,post_id:r,unread:i,published:_,read:l,reset:c,trash:u,draft:g,order:d,limit:p,is_initial_single_stage:t,stage:s,current_tab:j,show_all:m,type:a,user_id:o},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){let o;go_after_ajax(),"true"!=go_ajax_error_checker(e)&&-1!==e&&(console.log("success"),t?jQuery.featherlight(e,{variant:"go_quest_reader_lightbox",afterContent:function(){go_activate_reader(!0)}}):jQuery("#go_posts_wrapper").html(e).promise().done((function(){jQuery("#go_posts_wrapper").show(),jQuery(".go_apply_filters").off().one("click",(function(){go_reader_update()})),jQuery([document.documentElement,document.body]).animate({scrollTop:jQuery("#go_posts_wrapper").offset().top-150},500),go_blog_new_posts()})))}})}function go_blog_revision(e){console.log("function go_blog_revision");let t=jQuery(e).attr("blog_post_id"),o=GO_EVERY_PAGE_DATA.nonces.go_blog_revision;jQuery.ajax({url:MyAjax.ajaxurl,type:"post",data:{_ajax_nonce:o,is_frontend:is_frontend,action:"go_blog_revision",post_id:t},error:function(t,o,a){jQuery("#loader_container").remove(),400===t.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),jQuery(e).off().one("click",(function(){go_blog_revision(this)}))},success:function(t){let o;go_after_ajax(),jQuery(e).off().one("click",(function(){go_blog_revision(this)})),"true"!=go_ajax_error_checker(t)&&-1!==t&&jQuery.featherlight(t,{afterContent:function(){jQuery(".go_restore_revision").off().one("click",(function(){go_restore_revision(this)})),go_blog_new_posts()}})}})}function go_restore_revision(e){console.log("function go_restore_revision"),go_enable_loading(e);let t=!1,o=jQuery(e).data("post_id"),a=jQuery(e).data("parent_id"),r=jQuery(e).data("autosave"),s=jQuery(e).data("load_current"),n=GO_EVERY_PAGE_DATA.nonces.go_restore_revision;jQuery(e).parents(".featherlight-content").length&&(t=!0);let _=jQuery(e).data("form");console.log("load_current"+s),jQuery.ajax({url:MyAjax.ajaxurl,type:"post",data:{_ajax_nonce:n,is_frontend:is_frontend,action:"go_restore_revision",post_id:o,parent_id:a,autosave:r,lightbox:t,form:_,load_current:s},error:function(t,o,a){jQuery("#loader_container").remove(),400===t.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),jQuery(e).off().one("click",(function(){go_blog_revision(this)}))},success:function(e){let t;if(go_after_ajax(),"true"!=go_ajax_error_checker(e)&&-1!==e){if(_)if(1==s)var r=".go_check_autosave_"+o;else var r=".go_check_autosave_"+a;else{var r=".go_blog_post_wrapper_"+a;jQuery.featherlight.close()}console.log("wrap"+r),jQuery(r).replaceWith(e),"true"==_?(go_blog_after_ajax(),go_activate_tinymce_on_task_change_stage("go_blog_post")):go_blog_new_posts(),jQuery("#go_buttons").show(),1!=s&&swal.fire({text:"Your previous revision has been restored.",type:"success"})}}})}function go_num_posts(){const e=jQuery("#go_num_posts").val(),t=jQuery("#go_num_posts").data("query"),o=jQuery("#go_num_posts").data("where"),a=jQuery("#go_num_posts").data("order"),r=jQuery("#go_cards_toggle").is(":checked");jQuery("#go_cards_toggle_wrapper").hide();const s=GO_FRONTEND_DATA.nonces.go_num_posts;var n=go_loader_html("big");jQuery("#go_posts_wrapper").html(n);var _=jQuery("#social_tabs").find("[aria-selected='true']").attr("aria-controls"),i=jQuery("#go_show_all_feed").is(":checked");jQuery.ajax({url:MyAjax.ajaxurl,type:"GET",data:{_ajax_nonce:s,is_frontend:is_frontend,action:"go_num_posts",query:t,where:o,order:a,limit:e,cards:r,current_tab:_,show_all:i},error:function(e,t,o){jQuery("#loader_container").remove(),400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),jQuery("#go_cards_toggle_wrapper").show()},success:function(e){let t;go_after_ajax(),"true"!=go_ajax_error_checker(e)&&(-1!==e&&jQuery("#go_posts_wrapper").html(e).promise().done((function(){jQuery("#go_posts_wrapper").show("fast",(function(){go_blog_new_posts()}))})),jQuery("#go_cards_toggle_wrapper").show())}})}function go_reader_read_printed(){console.log("go_reader_read_printed");var e=GO_FRONTEND_DATA.nonces.go_reader_read_printed,t=new Array;jQuery(".go_blog_post_wrapper").each((function(e){var o=jQuery(this).data("postid");t.push(o)})),console.log("postids"),console.log(t),jQuery.ajax({url:MyAjax.ajaxurl,type:"post",data:{_ajax_nonce:e,is_frontend:is_frontend,action:"go_reader_read_printed",postids:t},error:function(e,t,o){console.log("not logged in"),400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){let t;console.log("success"),"true"!=go_ajax_error_checker(e)&&go_reader_update()}})}function go_mark_one_read_toggle(e){var t=GO_EVERY_PAGE_DATA.nonces.go_mark_one_read_toggle;const o=jQuery(e).data("postid");jQuery.ajax({url:MyAjax.ajaxurl,type:"post",data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_mark_one_read_toggle",postid:o},error:function(t,o,a){400===t.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),jQuery(e).off().one("click",(function(){go_mark_one_read_toggle(this)}))},success:function(e){let t;console.log(e),"true"!=go_ajax_error_checker(e)&&-1!==e&&(jQuery(".go_status_read_toggle").off().one("click",(function(){go_mark_one_read_toggle(this)})),"read"===e?(jQuery(".go_blog_post_wrapper_"+o).find(".fa-eye-slash").hide(),jQuery(".go_blog_post_wrapper_"+o).find(".fa-eye").show()):"unread"===e&&(jQuery(".go_blog_post_wrapper_"+o).find(".fa-eye-slash").show(),jQuery(".go_blog_post_wrapper_"+o).find(".fa-eye").hide()))}})}function go_feedback_canned(e){console.log("go_feedback_canned"),console.log(e);const t=jQuery(e).data("title"),o=jQuery(e).data("message"),a=jQuery(e).data("radio"),r=jQuery(e).data("toggle_assign"),s=jQuery(e).data("xp"),n=jQuery(e).data("gold"),_=jQuery(e).data("health"),i=jQuery(e).data("toggle_percent"),l=jQuery(e).data("percent"),c=jQuery(e).closest(".go_blog_post_wrapper").data("postid");console.log(t),console.log(o),console.log(a),console.log(i),console.log(r),jQuery(e).closest(".go_feedback_form").find(".go_title_input").val(t),tinyMCE.get("go_feedback_text_area_id_"+c).setContent(o),"percent"==a?(jQuery(e).closest(".go_feedback_form").find(".loot_option_percent").trigger("change"),jQuery(e).closest(".go_feedback_form").find(".loot_option_percent").prop("checked",!0),jQuery(e).closest(".go_feedback_form").find(".go_toggle_input").val(i),i?jQuery(e).closest(".go_feedback_form").find(".go-acf-switch").addClass("-on").removeClass("-off"):jQuery(e).closest(".go_feedback_form").find(".go-acf-switch").addClass("-off").removeClass("-on"),jQuery(e).closest(".go_feedback_form").find(".go_percent_input").val(l)):"assign"==a?(jQuery(e).closest(".go_feedback_form").find(".loot_option_assign").prop("checked",!0),jQuery(e).closest(".go_feedback_form").find(".loot_option_assign").trigger("change"),r?jQuery(e).closest(".go_feedback_form").find(".go-acf-switch").addClass("-on").removeClass("-off"):jQuery(e).closest(".go_feedback_form").find(".go-acf-switch").addClass("-off").removeClass("-on"),jQuery(e).closest(".go_feedback_form").find(".go_messages_toggle_input").val(r),jQuery(e).closest(".go_feedback_form").find(".go_messages_xp_input").val(s),jQuery(e).closest(".go_feedback_form").find(".go_messages_gold_input").val(n),jQuery(e).closest(".go_feedback_form").find(".go_messages_health_input").val(_)):"none"==a&&jQuery(e).closest(".go_feedback_form").find(".loot_option_none").trigger("click")}function go_send_feedback(e){console.log("go_send_feedback"),console.log(e);var t=jQuery(e).closest(".go_feedback_input").find(".go_title_input").val();const o=jQuery(e).data("postid");console.log("postid: "+o);var a="go_feedback_text_area_id_"+o;console.log("message_id: "+a);var r=go_tmce_getContent(a),s=jQuery(e).closest(".go_feedback_input").find("input[name=loot_option]:checked").val(),n=jQuery(e).closest(".go_feedback_input").find(".go_messages_toggle_input").siblings().hasClass("-on")?1:0,_=jQuery(e).closest(".go_feedback_input").find(".go_messages_xp_input").val(),i=jQuery(e).closest(".go_feedback_input").find(".go_messages_gold_input").val(),l=jQuery(e).closest(".go_feedback_input").find(".go_messages_health_input").val(),c=jQuery(e).closest(".go_feedback_input").find(".go_feedback_toggle").siblings().hasClass("-on")?1:0,u=jQuery(e).closest(".go_feedback_input").find(".feedback_percent_input").val(),g=GO_EVERY_PAGE_DATA.nonces.go_send_feedback,d={is_frontend:is_frontend,action:"go_send_feedback",_ajax_nonce:g,title:t,message:r,radio:s,toggle_assign:n,toggle_percent:c,percent:u,xp:_,gold:i,health:l,post_id:o};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:d,error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(t){let a;if("true"!=go_ajax_error_checker(t)){var r={};try{var r=JSON.parse(t)}catch(e){r={json_status:"101",table:"",form:""}}if(302===Number.parseInt(r.json_status)){console.log(302),jQuery(".go_blog_post_wrapper_"+o).find(".fa-eye-slash").hide(),jQuery(".go_blog_post_wrapper_"+o).find(".fa-eye").show();let t=r.table,a=r.form,_=r.icon;console.log(_);var s=jQuery(e).closest(".go_blog_post_wrapper");if(jQuery(e).closest(".go_blog_post_wrapper").find(".feedback_icon").html(_),jQuery(e).closest(".feedback_accordion").find(".go_feedback_table_container").length)jQuery(e).closest(".feedback_accordion").find(".go_feedback_table_container").html(t);else{var n='<h3>Feedback</h3><div class="go_blog_feedback"><div class="go_feedback_table_container"></div></div>';jQuery(e).closest(".feedback_accordion").prepend(n),jQuery(e).closest(".feedback_accordion").find(".go_feedback_table_container").html(t)}jQuery(e).closest(".feedback_accordion").find(".go_feedback_form_container").html(a),jQuery(".feedback_accordion").accordion("refresh"),go_blog_new_posts(),jQuery("html, body").animate({scrollTop:jQuery(s).offset().top-100},2e3)}console.log("send successful2"),console.log(e),Swal.fire({type:"success",showConfirmButton:!1,timer:1500})}}})}function go_get_likes_list(e){console.log("go_get_likes_list"),console.log("go_get_likes_list");var t=jQuery(e).data("user_id"),o=jQuery(e).data("post_id"),a=GO_EVERY_PAGE_DATA.nonces.go_get_likes_list;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:a,is_frontend:is_frontend,action:"go_get_likes_list",user_id:t,post_id:o},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),jQuery(".go_show_likes_list").off().one("click",(function(e){go_get_likes_list(this)})),console.log(e),-1!==e&&jQuery.featherlight(e,{variant:"go_get_likes_list",afterContent:function(){}})}})}function go_Vids_Fit_and_Box(e){console.log("go_Vids_Fit_and_Box here"),runmefirst(e,(function(){go_Max_width_and_LightboxNow()}))}function runmefirst(e,t){jQuery(e).fitVids(),t()}function go_fit_and_max_only(e){go_fit_and_max_only_first(e,(function(){go_Max_width()}))}function go_fit_and_max_only_first(e,t){jQuery(e).fitVids(),t()}function go_video_resize(){console.log("go_video_resize");var e=jQuery(".fit_and_box .featherlight-content .fluid-width-video-wrapper").css("padding-top"),t=jQuery(".fit_and_box .featherlight-content .fluid-width-video-wrapper").css("width"),o=(e=parseFloat(e))/(t=parseFloat(t));console.log("Vratio:"+o);var a=jQuery(window).width();console.log("vW:"+a);var r=a,s=jQuery(window).height();console.log("vH:"+s);var n=a*o;console.log("cH1:"+n),n>s&&(n=s-50,console.log("cH2:"+n),r=n/o,console.log("cW:"+r)),jQuery(".fit_and_box .featherlight-content").css("width",r),jQuery(".fit_and_box .featherlight-content").css("height",n)}function go_Max_width(){var e=GO_EVERY_PAGE_DATA.go_fitvids_maxwidth;console.log("max"+e),jQuery(".fluid-width-video-wrapper:not(.fit)").each((function(){jQuery(this).wrap('<div class="max-width-video-wrapper" style="position:relative;"><div>'),jQuery(this).addClass("fit"),jQuery(".max-width-video-wrapper").css("max-width",e)})),jQuery(".wp-video:not(.fit)").each((function(){jQuery(this).wrap('<div class="max-width-video-wrapper" style="position:relative;"><div>'),jQuery(this).addClass("fit"),jQuery(".max-width-video-wrapper").css("max-width",e)}))}function go_Max_width_and_LightboxNow(){var e;go_Max_width(),"1"===GO_EVERY_PAGE_DATA.go_lightbox_switch&&go_LightboxNow(),jQuery("#go_cards").length&&jQuery("#go_cards").masonry("reloadItems").masonry("layout")}function go_LightboxNow(){console.log("go_LightboxNow"),jQuery(".max-width-video-wrapper:not(.wrapped):has(iframe)").each((function(){jQuery(this).prepend('<a style="display:block;" class="featherlight_wrapper_iframe" href="#" ><div style="position:absolute; width:100%; height:100%; top:0; left: 0; z-index: 1;"></div></a>'),jQuery(this).find().unbind(),jQuery(this).addClass("wrapped")})),jQuery('[class^="featherlight_wrapper_iframe"]').each((function(){var e=jQuery(this).parent().find(".fluid-width-video-wrapper").parent().html();jQuery(this).attr("href",'<div id="go_video_container" style=" overflow: hidden;">'+e+"</div>"),jQuery(".featherlight_wrapper_iframe").featherlight({targetAttr:"href",closeOnEsc:!0,variant:"fit_and_box",afterOpen:function(e){jQuery(".fit_and_box .featherlight-content").css({width:"100%",overflow:"hidden"}),jQuery(".fit_and_box .featherlight-content iframe").attr("src",jQuery(".fit_and_box .featherlight-content iframe").attr("src")+"&autoplay=1"),go_video_resize(),jQuery(window).resize((function(){go_video_resize()}))}})}));var e=setInterval((function(){jQuery(".max-width-video-wrapper:not(.wrapped):has(video)").length&&(console.log("Exists!"),clearInterval(e),jQuery(".max-width-video-wrapper:not(.wrapped):has(video)").each((function(){var e;if(null==(e=jQuery(this).find("video").attr("src")))var e=jQuery(this).find("video").find("source").attr("src");console.log("src:"+e),jQuery(this).prepend('<a href=\'#\' class=\'featherlight_wrapper_vid_shortcode\' data-featherlight=\'<div id="go_video_container" style="height: 90vh; overflow: hidden; text-align: center;"> <video controls autoplay style="height: 100%; max-width: 100%;"><source src="'+e+"\" type=\"video/mp4\">Your browser does not support the video tag.</video></div>'  data-featherlight-close-on-esc='true' data-featherlight-variant='fit_and_box native2' ><span style=\"position:absolute; width:100%; height:100%; top:0; left: 0; z-index: 4;\"></span></a> "),jQuery(this).addClass("wrapped")})))}),100)}function go_help_vid(){console.log("go_help_vid"),jQuery(".go_help_vid:not(.wrapped)").each((function(){var e=jQuery(this).data("video");jQuery(this).prepend("<a style='display:block;' class='featherlight_help_vid_iframe fluid-width-video-wrapper' data-iframe='<div id=\"go_video_container\" style=\"overflow: hidden;\"><iframe  src=\"https://www.youtube.com/embed/"+e+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen"></iframe>\'</a><div><span class="go_help_info_icon" style="color: red;"><i class="fab fa-youtube"></i></span></div></a>'),jQuery(".max-width-video-wrapper").children().unbind(),jQuery(this).addClass("wrapped"),jQuery(".featherlight_help_vid_iframe").featherlight({targetAttr:"data-iframe",closeOnEsc:!0,variant:"fit_and_box",afterOpen:function(e){jQuery(".featherlight-content").css({width:"100%",overflow:"hidden"}),jQuery(".featherlight-content iframe").attr("src",jQuery(".featherlight-content iframe").attr("src")+"?autoplay=1"),go_help_video_resize(),jQuery(window).resize((function(){go_help_video_resize()}))}})}))}function go_help_video_resize(){console.log("go_help_video_resize");var e=jQuery(".featherlight-content iframe").height(),t=jQuery(".featherlight-content iframe").width();e=parseFloat(e),t=parseFloat(t),console.log("VratioH:"+e),console.log("VratioW:"+t);var o=e/t;console.log("Vratio:"+o);var a=jQuery(window).width();console.log("vW:"+a);var r=a,s=jQuery(window).height();console.log("vH:"+s);var n=a*o;console.log("cH1:"+n),n>s&&(n=s-50,console.log("cH2:"+n),r=n/o,console.log("cW:"+r)),jQuery(".featherlight-content").css("width",r),jQuery(".featherlight-content").css("height",n),jQuery(".featherlight").addClass("help"),jQuery(".featherlight-content iframe").css("width",r),jQuery(".featherlight-content iframe").css("height",n)}function go_setup_map(){console.log("go_setup_map");var e=jQuery("#maps").data("taxonomy");if(go_show_map_loot(!0),jQuery("#maps").hasClass("sortable")){var t=document.getElementById("go_Dropdown");new Sortable(t,{animation:150,onUpdate:function(e){var t=e.item,o=e.from;console.log("update");var a=[];jQuery(o).find(".mapLink").each((function(){var e=jQuery(this).data("term_id");a.push(e)}));var r=GO_EVERY_PAGE_DATA.nonces.go_update_map_order;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:r,action:"go_update_map_order",terms:a},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log(e),"success"!==e&&swal.fire({type:"warning",title:"There was a problem updating the map.",text:"The page will be updated and then you can try again.",confirmButtonText:"Refresh",timer:15e3}).then(e=>{location.reload()})}})}});var t=document.getElementById("primaryNav");console.log(t),new Sortable(t,{animation:150,onUpdate:function(t){console.log("update chain order"),console.log(t);var o=t.item,a=t.from,r=[];jQuery(a).find(".go_task_chain").each((function(){var e=jQuery(this).data("term_id");r.push(e)}));var s=jQuery("#maps").data("mapid"),n=GO_EVERY_PAGE_DATA.nonces.go_update_chain_order;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:n,action:"go_update_chain_order",terms:r,taxonomy:e,map_id:s},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log(e),"success"!==e&&swal.fire({type:"warning",title:"There was a problem updating the map.",text:"The page will be updated and then you can try again.",confirmButtonText:"Refresh",timer:15e3}).then(e=>{location.reload()})}})}});for(var o=document.getElementsByClassName("tasks"),a=0;a<o.length;a++){var t=o[a];new Sortable(t,{group:"shared",animation:150,onAdd:function(e){console.log("update task order Add");var t=e.item,o=e.to,a=e.from;go_update_task_sort(o)},onRemove:function(e){console.log("update task order Remove");var t=e.item,o=e.to,a;go_update_task_sort(e.from)},onUpdate:function(e){console.log("update task order update");var t=e.item,o=e.to,a;go_update_task_sort(e.from)}})}for(var o=document.getElementsByClassName("go_nested_list"),a=0;a<o.length;a++){var t=o[a];new Sortable(t,{group:"shared",animation:150,onAdd:function(e){console.log("update nest order Add");var t=e.item,o=e.to,a=e.from,r=null,s=null;jQuery(o).find(".task_container").each((function(){r=jQuery(this).find(".task").data("post_id")})),jQuery(a).closest(".tasks").find(".task_container").each((function(){s=jQuery(this).find(".task").data("post_id")})),r!=s&&go_update_nested_sort(o)},onRemove:function(e){console.log("update nest order Remove");var t=e.item,o=e.to,a=e.from,r=null,s=null;jQuery(o).find(".task_container").each((function(){r=jQuery(this).find(".task").data("post_id")})),jQuery(a).closest(".tasks").find(".task_container").each((function(){s=jQuery(this).find(".task").data("post_id")})),r!=s&&(console.log("update remove"),go_update_nested_sort(a))},onUpdate:function(e){console.log("update nest order update");var t=e.item,o=e.to,a;go_update_nested_sort(e.from)}})}}go_disable_tooltips(!0),jQuery(window).resize((function(){jQuery(".primaryNav").css("flex-direction","row"),wrapped()})),jQuery(document.body).click((function(e){jQuery("#go_Dropdown").addClass("hidden")})),jQuery(".dropdown").click((function(e){e.stopPropagation()})),jQuery(".go_nested_toggle").mouseenter((function(){console.log("in"),tippyInstances.forEach(e=>{e.disable()})})),jQuery(".go_nested_toggle").mouseleave((function(){console.log("out"),tippyInstances.forEach(e=>{e.enable()})})),jQuery(".go_nested_hover").hover((function(){t=jQuery(this),timeout=setTimeout((function(){console.log("go_nested_hover"),tippyInstances.forEach(e=>{e.hide()}),jQuery(t).find(".go_nested_toggle").addClass("open"),jQuery(t).find(".go_nested_list").css("display","block")}),150)}),(function(){clearTimeout(timeout),console.log("go_nested_exit"),jQuery(t).find(".go_nested_toggle").hasClass("toggled_open")||(jQuery(this).find(".go_nested_toggle").removeClass("open"),jQuery(this).find(".go_nested_list").css("display","none"))})),jQuery(".go_nested_toggle").click(go_nested_toggle),jQuery(".go_clone_icon").off().one("click",(function(){go_importer(this)})),jQuery(".go_chain_loot_info").each((function(){jQuery(this).closest(".go_task_chain").find(".go_task_chain_map_box").append(this)})),jQuery(".go_map_loot_info").each((function(){jQuery(this).closest("#maps").find(".map_title").append(this)})),go_actions_tooltip(),jQuery(".task_container").has(".go_nested_toggle").addClass("hasNested"),jQuery(".go_bonus_progress_bar").each((function(){var e;"100"!==jQuery(this).attr("data-width")&&jQuery(this).css("border-bottom-right-radius","0")})),jQuery("#page").css("width","100%").css("max-width","unset"),jQuery("#go_map_container").show(),jQuery("#sitemap").show(),jQuery("#maps").show(),go_activate_tippy(),jQuery(".primaryNav").css("flex-direction","row"),wrapped(),go_set_nested_toggle_colors(),console.log("map is ready")}function go_update_task_sort(e){var t=[];jQuery(e).find(".task_container").each((function(){var e=[],o=jQuery(this).find(".task").data("post_id"),a=0;jQuery(this).closest("ul").hasClass("go_nested_list")?(a=1,jQuery(this).find(".nested_checkbox").attr("checked",!0)):jQuery(this).find(".nested_checkbox").attr("checked",!1),e.push(o),e.push(a),t.push(e)}));var o=jQuery(e).data("chain_id"),a=jQuery("#maps").data("taxonomy"),r=GO_EVERY_PAGE_DATA.nonces.go_update_task_order;console.log("go_update_task_sort"),console.log(t),console.log(o),jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:r,action:"go_update_task_order",tasks:t,chain_id:o,taxonomy:a},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_fix_task_colors(e),go_set_nested_toggle_colors()}})}function go_update_nested_sort(e){var t=jQuery("#maps").data("taxonomy"),o=[];jQuery(e).find(".go_nested_toggle").remove(),jQuery(e).find(".go_nested_hover").contents().unwrap(),jQuery(e).find(".go_nested_list").contents().unwrap(),jQuery(e).find(".task_container").removeClass("hasNested"),jQuery(e).find(".task_container").each((function(){jQuery(this).find(".task_container").insertAfter(this)})),jQuery(e).closest(".tasks").find(".task_container").each((function(){var e=[],t=jQuery(this).find(".task").data("post_id"),a=0;jQuery(this).closest("ul").hasClass("go_nested_list")?(a=1,jQuery(this).find(".nested_checkbox").prop("checked",!0)):jQuery(this).find(".nested_checkbox").prop("checked",!0),e.push(t),e.push(a),o.push(e)}));var a=jQuery(e).closest(".tasks").data("chain_id"),r=GO_EVERY_PAGE_DATA.nonces.go_update_task_order;console.log("go_update_nested_sort"),console.log(o),console.log(a),jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:r,action:"go_update_task_order",tasks:o,chain_id:a,taxonomy:t},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_fix_task_colors(e),go_set_nested_toggle_colors()}})}function go_set_nested_toggle_colors(){jQuery(".go_nested_list").each((function(){var e=0,t=0,o=0,a=0,r=!1,s="";jQuery(this).find(".task").each((function(){e++,jQuery(this).hasClass("available")&&o++,jQuery(this).hasClass("done")&&t++,jQuery(this).hasClass("locked")&&a++})),o>0&&(r=!0,s="available"),a>0&&!r&&(r=!0,s="locked"),r||(s="done"),jQuery(this).prev().removeClass("available locked done"),jQuery(this).prev().addClass(s),0===e&&(jQuery(this).closest(".task_container").removeClass("hasNested"),jQuery(this).closest(".go_nested_hover").remove())}))}function go_fix_task_colors(e){var t;if("true"!=go_ajax_error_checker(e)){var o={},a;try{var o=JSON.parse(e)}catch(e){o={json_status:"101",lock_info:""}}302!==o.json_status&&swal.fire({type:"warning",title:"There was a problem updating the map.",text:"The page will be updated and then you can try again.",confirmButtonText:"Refresh",timer:15e3}).then(e=>{location.reload()}),o.lock_info.forEach((function(e,t){var o=e[0],a=e[1],r;jQuery(".task_id_"+o).each((function(){jQuery(this).hasClass("done")||(jQuery(this).removeClass("available"),jQuery(this).hasClass("locked"),console.log(a),a?jQuery(this).addClass("locked"):jQuery(this).addClass("available"))}))}))}}function wrapped(){if(console.log("wrapped"),jQuery(".go_task_chain").length){var e=jQuery(".go_task_chain").offset().top;jQuery(".go_task_chain").each((function(){var t=jQuery(this).offset().top;t>e?(jQuery(".primaryNav").css("flex-direction","column"),jQuery(this).addClass("wrapped")):t==e&&jQuery(this).removeClass("wrapped"),e=t}))}var t=jQuery(".dropdown").offset(),o=jQuery(".dropdown").width(),a=jQuery(".go_map_action_icons").offset(),r=jQuery(".droptop").height();t.left+o+10>a.left?(jQuery(".dropdown").css("margin-top",40),jQuery("#maps").css("margin-top",r+70)):(jQuery(".dropdown").css("margin-top",0),jQuery("#maps").css("margin-top",r+30)),jQuery()}function go_show_map_loot(e=!1){console.log("go_show_map_loot");var t=localStorage.getItem("user_show_loot");e?"show"===t&&jQuery(".loot_info").show():(t="show"===t?"hide":"show",localStorage.setItem("user_show_loot",t),jQuery(".loot_info").toggle())}function go_disable_tooltips(e=!1){console.log("go_disable_tooltips");var t=sessionStorage.getItem("map_actions");null!==t&&e?"false"===t?(jQuery(".go_map_action_icons .tooltip_toggle .inactive").show(),jQuery(".go_map_action_icons .tooltip_toggle .active").hide(),jQuery(".go_badge_wrap .fig_wrap.inactive").hide(),jQuery(".go_badge_wrap .fig_wrap.active").show()):(jQuery(".go_map_action_icons .tooltip_toggle .inactive").hide(),jQuery(".go_map_action_icons .tooltip_toggle .active").show(),jQuery(".go_badge_wrap .fig_wrap.inactive").show(),jQuery(".go_badge_wrap .fig_wrap.active").hide()):"true"===t?(sessionStorage.setItem("map_actions","false"),tippyInstances.forEach(e=>{e.destroy()}),tippyInstances.length=0,jQuery(".go_map_action_icons .tooltip_toggle .inactive").show(),jQuery(".go_map_action_icons .tooltip_toggle .active").hide(),jQuery(".go_badge_wrap .fig_wrap.inactive").hide(),jQuery(".go_badge_wrap .fig_wrap.active").show()):(sessionStorage.setItem("map_actions","true"),go_actions_tooltip(),jQuery(".go_map_action_icons .tooltip_toggle .inactive").hide(),jQuery(".go_map_action_icons .tooltip_toggle .active").show(),jQuery(".go_badge_wrap .fig_wrap.inactive").show(),jQuery(".go_badge_wrap .fig_wrap.active").hide())}function go_quests_frontend(e){console.log("go_quests_frontend");var t=go_loader_html("big");console.log(t),jQuery("#quest_frontend_wrapper").append(t),jQuery("#quest_frontend_loader").show();var o=jQuery("#maps").data("taxonomy");jQuery(".go_quests_frontend").off();var a=GO_FRONTEND_DATA.nonces.go_quests_frontend,r=jQuery(e).data("post_id"),t=go_loader_html("big");jQuery.featherlight(t,{variant:"quests",iframeWidth:"90%"}),jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:a,post_id:r,action:"go_quests_frontend",is_single_stage:"true",taxonomy:o},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),jQuery(".go_clone_icon").off().one("click",(function(){go_importer(this)}))},success:function(e){jQuery(".featherlight.quests .featherlight-content").append(e),console.log("after"),"store_types"===o?(console.log(o),go_clipboard_store_datatable(!0),jQuery("#go_clipboard_store_datatable").DataTable().columns.adjust().responsive.recalc(),go_make_select2_cpt("#go_store_item_select","go_store")):(go_clipboard_activity_datatable(!0),jQuery("#go_clipboard_activity_datatable").DataTable().columns.adjust().responsive.recalc(),go_make_select2_cpt("#go_task_select","tasks")),go_make_select2_filter("user_go_sections","reader",!0),go_make_select2_filter("user_go_groups","reader",!0),go_make_select2_filter("go_badges","reader",!0),go_setup_filter_buttons(!1),jQuery("#go_datepicker_container").one("click",(function(){go_load_daterangepicker("go_activate_reader"),jQuery("#go_reset_datepicker").show(),go_daterange_clear(),go_highlight_apply_filters()})),jQuery("#go_store_filters").hide()}})}function go_trash_post(e){console.log("go_trash_post"),console.log(e),jQuery(".go_trash_post").off();var t=jQuery(e).data("taxonomy");t||(t=jQuery("#maps").data("taxonomy")),console.log(t)
;var o=jQuery(e).data("post_id"),a=jQuery(e).data("term_id"),r=jQuery(e).data("map_id"),s=jQuery("#mapwrapper").data("singular"),n=jQuery("#mapwrapper").data("plural"),_="",i="",l="";if(o){var c;l="<p>You are about to move the "+s+" <b>"+(c=jQuery(e).data("title"))+"</b> to the trash.</p>";var u=jQuery(".task_container_"+o),g;if(console.log(u),jQuery(u).hasClass("hasNested")){console.log("hasNested");var d=[],p;jQuery(u).find("ul").find("li").each((function(){var e=jQuery(this).data("post_id");d.push(e)})),(p=d.length)>0?(_=1===p?"<p>There is one nested "+s+" that will also be moved to the trash.":"<p>There are "+p+" nested "+n+" that will also be moved to the trash.",i="<br>Empty the trash to remove them permanently.</br></p>"):i="<p>Empty the trash to remove it permanently.</p>"}}else if(a){var c=jQuery(e).data("title");if("task_chains"===t||"store_types"===t){l="<p>You are about to delete the section <b>"+c+".</b> The section will be deleted immediately and this can not be undone.</p>";var u=jQuery(".task_chain_container_"+a),d=[],p;jQuery(u).find(".task_container").each((function(){var e=jQuery(this).data("post_id");d.push(e)})),(p=d.length)>0&&(1===p?(_="<p>There is one child "+s+" that will also be moved to the trash.",i="<br>Empty the trash to remove it permanently.</br>"):(_="<p>There are "+p+" children "+n+" that will also be moved to the trash.",i="<br>Empty the trash to remove them permanently.</br></p>"))}else{l="<p>You are about to delete the item <b>"+c+".</b> It will be deleted immediately and this can not be undone.</p>";var u=jQuery(".badges_row_"+a),h=[],p;jQuery(u).find(".go_badge_wrap").each((function(){var e=jQuery(this).data("term_id");h.push(e)})),(p=h.length)>0&&(_=1===p?"<p>There is one child item that will also be deleted immediately.":"<p>There are "+p+" items that will also be deleted immediately.")}}else if(r){var c=jQuery(e).data("title"),u=jQuery(".map_"+r),d=[],p;if(jQuery(u).find(".go_task_chain").each((function(){var e=jQuery(this).data("post_id");d.push(e)})),(p=d.length)>0)return void swal.fire({type:"warning",title:"This map has sections.",text:"Please delete all the sections on the map before deleting the map. No action will be taken",confirmButtonText:"Continue"});l="<p>You are about to delete the map <b>"+c+".</b> The section will be deleted immediately and this can not be undone.</p>",a=r}l=l+_+i,tippyInstances.forEach(e=>{e.hide()}),Swal.fire({title:"Are you sure?",html:l,showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel",reverseButtons:!0,showLoaderOnConfirm:!0,preConfirm:e=>{jQuery(".go_quick_edit").off();var r=GO_FRONTEND_DATA.nonces.go_trash_post;return jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:r,post_id:o,term_id:a,children:d,children_terms:h,taxonomy:t,action:"go_trash_post",is_frontend:is_frontend}}).then(e=>e)},allowOutsideClick:()=>!Swal.isLoading()}).then(e=>{console.log(e.value),0===e.value&&Swal.showValidationMessage("Error."),"refresh"===e.value&&Swal.fire({title:"Error."}),e.value&&("task_chains"===t||"store_types"===t?(jQuery("#mapwrapper").html(e.value),go_setup_map()):"go_badges"===t?(jQuery("#stats_badges_page").html(e.value),go_setup_badges_page()):"user_go_groups"===t&&(jQuery("#stats_groups_page").html(e.value),go_setup_groups_page()),Swal.fire({type:"success"}))})}function go_quick_edit_show(e){console.log("go_quick_edit_show");var t=jQuery(e).data("taxonomy");t||(t=jQuery("#maps").data("taxonomy"));var o=jQuery(e).closest(".go_actions_wrapper_flex").find(".quickedit_form_container").html();tippyInstances.forEach(e=>{e.hide()}),Swal.fire({title:"Quick Edit",html:o,showCancelButton:!0,confirmButtonText:"Save",cancelButtonText:"Cancel",reverseButtons:!0,showLoaderOnConfirm:!0,preConfirm:e=>{console.log("go_quick_edit"),jQuery(".go_quick_edit").off();var o=GO_EVERY_PAGE_DATA.nonces.go_quick_edit,a=jQuery(event.target).closest(".swal2-container").find(".quickedit_form").data("post_id"),r=jQuery(event.target).closest(".swal2-container").find(".post_title").val(),s=jQuery(event.target).closest(".swal2-container").find(".hidden_checkbox").is(":checked"),n=jQuery(event.target).closest(".swal2-container").find(".nested_checkbox").is(":checked"),_=jQuery(event.target).closest(".swal2-container").find(".optional_checkbox").is(":checked"),i=jQuery(event.target).closest(".swal2-container").find(".quickedit_form").data("term_id"),l=jQuery(event.target).closest(".swal2-container").find(".term_title").val(),c=jQuery(event.target).closest(".swal2-container").find(".pod_checkbox").is(":checked"),u=jQuery(event.target).closest(".swal2-container").find(".locked_prev_checkbox").is(":checked"),g="test";return jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:o,post_id:a,nested:n,optional:_,hidden:s,title:r,term_id:i,term_title:l,pod_checkbox:c,locked_prev_checkbox:u,action:"go_quick_edit",is_frontend:is_frontend,taxonomy:t}}).then(e=>e)},allowOutsideClick:()=>!Swal.isLoading()}).then(e=>{console.log(e.value),0===e.value&&Swal.showValidationMessage("Error."),"refresh"===e.value&&Swal.fire({title:"Error."}),e.value&&("task_chains"===t||"store_types"===t?(jQuery("#mapwrapper").html(e.value),go_setup_map()):"go_badges"===t?(jQuery("#stats_badges_page").html(e.value),go_setup_badges_page()):"user_go_groups"===t&&(jQuery("#stats_groups_page").html(e.value),go_setup_groups_page()),Swal.fire({type:"success"}))})}function go_edit_frontend(e,t=null,o=!1){swal.close(),console.log("go_edit_frontend"),sessionStorage.setItem("go_acf_changes","false"),jQuery(".go_edit_frontend").off();var a=go_loader_html("fountain");if(null===t&&(t=jQuery(e).data("post_id")),null!==e)var r=jQuery(e).data("term_id"),s=jQuery(e).data("new_parent_term"),n=jQuery(e).data("new_child_term"),_=jQuery(e).data("term_name"),i=jQuery(e).data("new_store_item"),l=jQuery(e).data("chain_id"),c=jQuery(e).data("chain_name"),u=jQuery(e).data("settings"),g=jQuery(e).data("group"),d=jQuery(e).data("title"),p=window.location.href;var h=GO_EVERY_PAGE_DATA.nonces.go_edit_frontend,f=jQuery(e).data("taxonomy");f||(f=jQuery("#maps").data("taxonomy"),jQuery.featherlight.close());var y='<div id="edit_container">'+a+'<div id="edit_wrap" style="display: none;"></div></div>';void 0!==window.tippyInstances&&tippyInstances.forEach(e=>{e.hide()}),jQuery.featherlight(y,{variant:"go_edit_frontend_lightbox",iframeWidth:"95%",iframeHeight:"95%",beforeClose:function(e){var t;if(console.log("closing"),console.log(o),"true"===sessionStorage.getItem("go_acf_changes"))return swal.fire({type:"warning",title:"You have unsaved changes. ",text:"Are you sure you want to close the editing window?",confirmButtonText:"Keep Editing",showCancelButton:!0,cancelButtonText:"Close"}).then(e=>{var t;"cancel"===e.dismiss&&(sessionStorage.setItem("go_acf_changes","false"),jQuery.featherlight.current().close(),o&&location.reload())}),!1;o&&location.reload(),jQuery(".go_edit_frontend_badge").off().one("click",(function(){go_edit_frontend(this)}))},afterOpen:function(e){console.log(this);var o=this;console.log("ajax"),jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:h,post_id:t,tag_ID:r,new_store_item:i,new_parent_term:s,new_child_term:n,taxonomy:f,settings:u,group:g,title:d,url:p,action:"go_edit_frontend"},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log("success"),jQuery(o.$content).find("#edit_wrap").html(e).promise().done((function(){jQuery("#acf-field_5e37cdd9598cb").data("minimumInputLength",4),go_initialize_acf_form((function(){go_activate_tippy(),jQuery(".select2").width("100%"),sessionStorage.setItem("go_acf_changes","false"),jQuery("#loader_container").hide(100,(function(){jQuery("#edit_wrap").show(100,(function(){jQuery(".wp-editor-area").each((function(){var e=jQuery(this).attr("id");console.log("go_mce_id"+e),go_activate_tinymce_on_task_change_stage(e,"admin"),jQuery(".acf-field").change((function(e){sessionStorage.setItem("go_acf_changes","true")}))})),n?(console.log("new child term"),"task_chains"===f?(jQuery("#acf-field_5e35987e47073").select2("trigger","select",{data:{id:n,text:_}}),jQuery(".acf-field-5e35979c47071 .acf-radio-list li input").last().trigger("click")):"store_types"===f?(jQuery("#acf-field_5e37bbe75b17d").select2("trigger","select",{data:{id:n,text:_}}),jQuery(".acf-field-5e37bb8f5b17c .acf-radio-list li input").last().trigger("click")):"go_badges"===f?(jQuery("#acf-field_5e37ce341f358").select2("trigger","select",{data:{id:n,text:_}}),jQuery(".acf-field-5e37cdfe1f357 .acf-radio-list li input").last().trigger("click")):"user_go_groups"===f&&(jQuery("#acf-field_5e389128e24d3").select2("trigger","select",{data:{id:n,text:_}}),jQuery(".acf-field-5e389128e24ab .acf-radio-list li input").last().trigger("click")),sessionStorage.setItem("go_acf_changes","false")):i&&(console.log("NEW STORE ITEM"),jQuery("#acf-field_5abde7f92fd6a-field_5abde7f964b9f-field_5abde7f980bdf").prop("checked","true").trigger("change").find(".acf-switch").addClass("-on").removeClass("-off"),jQuery("#acf-field_5abde7f92fd6a-field_5abde7f964b9f-field_5abde7f980c65").select2("trigger","select",{data:{id:l,text:c}}))}))}))}))}))}})}})}function go_initialize_acf_form(e){acf.do_action("append",jQuery(".acf-form")),e()}function go_nested_toggle(){console.log("go_nested_toggle");var e=jQuery(this).next();jQuery(this).hasClass("toggled_open")?(jQuery(this).removeClass("open"),jQuery(this).removeClass("toggled_open"),e.hide(),jQuery(this).find(".nested_icon").html("<i class='fas fa-caret-down'></i>")):(jQuery(this).addClass("open"),jQuery(this).addClass("toggled_open"),e.show(),jQuery(this).find(".nested_icon").html("<i class='fas fa-caret-up'></i>"))}function go_to_this_map(e){var t=GO_EVERY_PAGE_DATA.nonces.go_to_this_map;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_to_this_map",map_id:e},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),console.log("success"),featherlight}})}function go_show_map(e){console.log("go_show_map");var t=go_loader_html("big"),o=GO_EVERY_PAGE_DATA.nonces.go_update_last_map,a=jQuery("#go_map_user").data("uid"),r=jQuery("#maps").data("taxonomy");jQuery("#mapwrapper").html(t),jQuery.ajax({type:"POST",url:MyAjax.ajaxurl,data:{is_frontend:is_frontend,action:"go_update_last_map",goLastMap:e,taxonomy:r,_ajax_nonce:o,uid:a},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),jQuery("#mapwrapper").html(e),console.log("success!"),go_setup_map(),jQuery(".go_blog_user_task").off().one("click",(function(){go_blog_user_task(this)}))}})}function go_map_dropDown(e){e?(jQuery("#go_Dropdown").removeClass("hidden"),jQuery("#go_drop_arrow .up").show(),jQuery("#go_drop_arrow .down").hide()):(jQuery("#go_Dropdown").addClass("hidden"),jQuery("#go_drop_arrow .up").hide(),jQuery("#go_drop_arrow .down").show()),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function go_user_map(e){console.log("go_user_map");var t=GO_EVERY_PAGE_DATA.nonces.go_user_map_ajax,o=jQuery(e).data("user_id"),a=go_loader_html("big");jQuery(".featherlight.map .featherlight-content ").html(a),jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_user_map_ajax",uid:o},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(t){go_after_ajax(),-1!==t&&jQuery.featherlight(t,{variant:"map",beforeOpen:function(){jQuery.featherlight.close()},afterContent:function(){console.log("after"),jQuery(".go_blog_user_task").off().one("click",(function(){go_blog_user_task(this)})),go_setup_map(),go_map_add_next_prev(o)}}),jQuery(e).off().one("click",(function(e){go_user_map(this)}))}})}function go_map_add_next_prev(e){console.log("go_map_add_next_prev");var t=jQuery(".go_user_map[data-user_id="+e+"]");console.log("current: "+t);var o=jQuery(".go_user_map").index(t);console.log("index: "+o);var a=jQuery(".go_user_map")[o-1],r=jQuery(".go_user_map")[o+1];if("undefined"!==a){var s=jQuery(a).data("user_id");s>0&&jQuery(".go_map_prev").data("user_id",s).off().show().on("click",(function(){go_user_map(this)})),console.log("prev_id: "+s)}if("undefined"!==r){var n=jQuery(r).data("user_id");n>0&&jQuery(".go_map_next").data("user_id",n).off().show().on("click",(function(){go_user_map(this)})),console.log("next_id: "+n)}}function go_update_badge_group_sort(e){console.log("go_update_badge_group_sort");var t=[];jQuery(e).find(".go_badge_wrap").each((function(){var e=jQuery(this).data("term_id");t.push(e)}));var o=jQuery(e).data("term_id"),a=jQuery(e).data("taxonomy"),r=GO_EVERY_PAGE_DATA.nonces.go_update_badge_group_sort;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:r,action:"go_update_badge_group_sort",terms:t,term_id:o,taxonomy:a},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log("success")}})}function go_reset_opener(e){console.log("go_reset_opener"),"multiple_messages"!=e&&null!=e||(jQuery(".go_messages_icon_multiple_clipboard").parent().prop("onclick",null).off("click"),jQuery(".go_messages_icon_multiple_clipboard").parent().one("click",(function(e){go_messages_opener(null,null,"multiple_messages")}))),"single_reset"!=e&&null!=e||(jQuery(".go_reset_task_clipboard").prop("onclick",null).off("click"),jQuery(".go_reset_task_clipboard").one("click",(function(){go_messages_opener(this.getAttribute("data-uid"),this.getAttribute("data-task"),"single_reset",this)}))),"multiple_reset"!=e&&null!=e||(jQuery(".go_tasks_reset_multiple_clipboard").parent().prop("onclick",null).off("click"),jQuery(".go_tasks_reset_multiple_clipboard").parent().one("click",(function(){go_messages_opener(null,null,"multiple_reset",this)}))),"single_message"!=e&&null!=e||(jQuery(".go_stats_messages_icon").prop("onclick",null).off("click"),jQuery(".go_stats_messages_icon").one("click",(function(e){var t;go_messages_opener(this.getAttribute("data-uid"),null,"single_message",this)}))),"reset_stage"!=e&&null!=e||(jQuery(".go_reset_task_stage_blog").prop("onclick",null).off("click"),jQuery(".go_reset_task_stage_blog").one("click",(function(){go_messages_opener(this.getAttribute("data-uid"),this.getAttribute("data-task"),"reset_stage",this)})))}function go_messages_opener(e,t,o,a){t=void 0!==t?t:null,o=void 0!==o?o:null,console.log("type: "+o),console.log("UID: "+e),console.log("post_id: "+t),jQuery(".go_tasks_reset_multiple_clipboard").prop("onclick",null).off("click");var r=[];if("multiple_messages"==o||"multiple_reset"==o){for(var s=jQuery(".go_checkbox:visible"),n=0;n<s.length;n++)if(!0===s[n].checked){var _=s[n].getAttribute("data-uid"),i=s[n].getAttribute("data-task");"multiple_messages"==o&&(i=""),r.push({uid:_,task:i})}}else if(("single_reset"==o||"single_message"==o||"reset_stage"==o)&&(r.push({uid:e,task:t}),"reset_stage"==o)){console.log("target: "+a);var l=go_loader_html("small");jQuery(a).find(".go_round_inner").html(l)}var c=GO_EVERY_PAGE_DATA.nonces.go_create_admin_message,u={action:"go_create_admin_message",is_frontend:is_frontend,_ajax_nonce:c,message_type:o,reset_vars:r};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:u,error:function(e,t,a){go_reset_opener(o),400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){var s=jQuery.parseJSON(e);if("reset"==s.type)var n="",_=!0,i=!0,l="IndianRed",c='<i class="fas fa-paper-plane"></i> Send',u='<i class="fas fa-times-circle"></i> Cancel';else if("no_users"==s.type)var n="error",_=!0,i=!1,l="grey",u='<i class="fas fa-times-circle"></i> Try again!',c="Cancel";else var n="",_=!0,i=!0,l="",c='<i class="fas fa-paper-plane"></i> Send Message',u='<i class="fas fa-times-circle"></i> Cancel';swal.fire({title:s.title,html:s.message,type:n,showCancelButton:_,showConfirmButton:i,reverseButtons:!0,customClass:"go_wide_swal",confirmButtonColor:l,confirmButtonText:c,cancelButtonText:u,onOpen:function(){jQuery("#message_loot_toggle").change((function(){var e=jQuery('input[name="message_loot_toggle"]:checked').val();console.log("loot dir:"+e),"add"==e?jQuery("#go_loot_table").addClass("reward").removeClass("penalty").show():"remove"==e?jQuery("#go_loot_table").addClass("penalty").removeClass("reward").show():jQuery("#go_loot_table").hide()})),jQuery("#go_note").change((function(){var e;if(jQuery("#go_note:checked").val())jQuery("#go_loot_table, .go_loot_radio").hide();else{jQuery(".go_loot_radio").show();var t=jQuery('input[name="message_loot_toggle"]:checked').val();"true"!=t&&"false"!=t||jQuery("#go_loot_table").show()}}))}}).then(e=>{e.value&&go_send_message(r,o,t,this)}),jQuery(a).find(".go_round_inner").html('<i class="fas fa-times-circle"></i>'),go_reset_opener(o),jQuery(".go_messages_canned").on("change",(function(e){var t;go_messages_canned(jQuery("option:selected",this))})),jQuery(".go-acf-switch").click((function(){console.log("click"),0==jQuery(this).hasClass("-on")?(jQuery(this).prev("input").prop("checked",!0),jQuery(this).addClass("-on"),jQuery(this).removeClass("-off")):(jQuery(this).prev("input").prop("checked",!1),jQuery(this).removeClass("-on"),jQuery(this).addClass("-off"))})),go_make_select2_filter("go_badges","lightbox",!1),go_make_select2_filter("user_go_groups","lightbox",!1),go_make_select2_filter("user_go_sections","lightbox",!1),go_activate_tippy(),jQuery("#go_additional_penalty_toggle").change((function(){var e;1==document.getElementById("go_additional_penalty_toggle").checked?jQuery(".go_penalty_table").css("display","block"):jQuery(".go_penalty_table").css("display","none")})),jQuery("#go_custom_message_toggle").change((function(){var e;1==document.getElementById("go_custom_message_toggle").checked?jQuery("#go_custom_message_table").css("display","block"):jQuery("#go_custom_message_table").css("display","none")})),go_activate_tinymce_on_task_change_stage("go_message_text_area_id")}})}function go_send_message(e,t,o){var a=jQuery(".go_messages_title_input").val();t="multiple_reset"==t||"single_reset"==t?"reset":"reset_stage"==t?"reset_stage":"message";var r=jQuery("#go_note").is(":checked");if("reset"==t||"reset_stage"==t)var s=document.getElementById("go_custom_message_toggle").checked,n=document.getElementById("go_additional_penalty_toggle").checked;else var s=null,n=null;if("message"==t||("reset"==t||"reset_stage"==t)&&1==s)var _=go_tmce_getContent("go_message_text_area_id");else _="";if(console.log("1:"+t),"message"==t||("reset"==t||"reset_stage"==t)&&1==n){var i=!1;if("message"==t){var l=jQuery('input[name="message_loot_toggle"]:checked').val();if("add"==l)var i=1;else if("remove"==l)var i=-1;else var i=!1}else var i=-1;if(i)var c=jQuery("#messages_form .xp_messages").val()*i,u=jQuery("#messages_form .gold_messages").val()*i,g=jQuery("#messages_form .health_messages").val()*i,d=jQuery("#messages_form #go_lightbox_go_badges_select").val(),p=jQuery("#messages_form #go_lightbox_user_go_groups_select").val(),h=jQuery("#messages_form #go_lightbox_user_go_sections_select").val();else var c=0,u=0,g=0,d=null,p=null,h=null}else if(("reset"==t||"reset_stage"==t)&&0==n)var i=-1,c=0,u=0,g=0,d=null,p=null;if(r)var i=-1,c=0,u=0,g=0,d=null,p=null,h=null;var f=GO_EVERY_PAGE_DATA.nonces.go_send_message,y={action:"go_send_message",is_frontend:is_frontend,_ajax_nonce:f,reset_vars:e,message_type:t,title:a,message:_,xp:c,gold:u,health:g,loot_toggle:i,sections:h,badges:d,groups:p,penalty:n,is_note:r};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:y,error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){var a,r,s,n;(console.log("my send successful"),Swal.fire({type:"success",showConfirmButton:!1,timer:1500}),jQuery("#go_tasks_datatable").length&&"reset"===t)&&jQuery("#go_tasks_datatable").DataTable().ajax.reload();jQuery("#go_messages_datatable").length&&"message"===t&&jQuery("#go_messages_datatable").DataTable().ajax.reload();jQuery("#go_clipboard_messages_datatable").length&&"message"===t&&jQuery("#go_clipboard_messages_datatable").DataTable().ajax.reload();jQuery("#go_clipboard_activity_datatable").length&&"reset"===t&&jQuery("#go_clipboard_activity_datatable").DataTable().ajax.reload();if("reset_stage"==t){var _=".go_blog_post_wrapper_"+o;jQuery(_+" .go_reset_task_stage_blog").hide(),jQuery(_).addClass("reset"),jQuery(_+" .go_status_icon").html("")}else go_toggle_off()}})}function go_messages_canned(e){console.log("go_messages_canned3");const t=jQuery(e).data("title"),o=jQuery(e).data("message"),a=jQuery(e).data("radio"),r=jQuery(e).data("xp"),s=jQuery(e).data("gold"),n=jQuery(e).data("health"),_=jQuery(e).data("badge"),i=jQuery(e).data("group"),l=jQuery(e).data("section"),c=jQuery(e).data("badge_name"),u=jQuery(e).data("group_name"),g=jQuery(e).data("section_name");if(jQuery(e).closest(".swal2-container").find(".go_messages_title_input").val(t),tinyMCE.get("go_message_text_area_id").setContent(o),jQuery("input[name=message_loot_toggle][value="+a+"]").prop("checked",!0),jQuery(e).closest(".swal2-container").find(".go_messages_xp_input").val(r),jQuery(e).closest(".swal2-container").find(".go_messages_gold_input").val(s),jQuery(e).closest(".swal2-container").find(".go_messages_health_input").val(n),_){var d=new Option(c,_,!0,!0);jQuery("#go_lightbox_go_badges_select").append(d).trigger("change")}if(i){var p=new Option(u,i,!0,!0);jQuery("#go_lightbox_user_go_groups_select").append(p).trigger("change")}if(l){var h=new Option(g,l,!0,!0);jQuery("#go_lightbox_user_go_sections_select").append(h).trigger("change")}jQuery(e).closest(".swal2-container").find(".go_lightbox_go_badges_select").val(_),jQuery(e).closest(".swal2-container").find(".go_messages_group_input").val(i),jQuery(e).closest(".swal2-container").find(".go_messages_section_input").val(l),jQuery(e).closest(".swal2-container").find("#message_loot_toggle").trigger("change")}function go_toggle_off(){checkboxes=jQuery(".go_checkbox");for(var e=0,t=checkboxes.length;e<t;e++)checkboxes[e].checked=!1}function go_check_messages_ajax(){var e=GO_EVERY_PAGE_DATA.nonces.go_check_messages_ajax;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:e,action:"go_check_messages_ajax",is_frontend:is_frontend},success:function(e){console.log(e),0!=e&&jQuery("body").append(e)}})}function go_admin_check_messages_focus(){document.hasFocus()}function go_setup_clipboard(){go_load_daterangepicker("go_setup_clipboard"),jQuery("#records_tabs").length&&(jQuery("#records_tabs").tabs(),jQuery(".clipboard_tabs").click((function(){switch(tab=jQuery(this).attr("tab"),tab){case"clipboard":go_clipboard_stats_datatable(!1),jQuery("#go_clipboard_stats_datatable").DataTable().columns.adjust().responsive.recalc();break;case"store":go_clipboard_store_datatable(),jQuery("#go_clipboard_store_datatable").DataTable().columns.adjust().responsive.recalc(),go_make_select2_cpt("#go_store_item_select","go_store");break;case"messages":go_clipboard_messages_datatable(),jQuery("#go_clipboard_messages_datatable").DataTable().columns.adjust().responsive.recalc();break;case"activity":go_clipboard_activity_datatable(),jQuery("#go_clipboard_activity_datatable").DataTable().columns.adjust().responsive.recalc(),go_make_select2_cpt("#go_task_select","tasks");break;case"attendance":go_clipboard_attendance_datatable(),jQuery("#go_clipboard_attendance_datatable").DataTable().columns.adjust().responsive.recalc();break}})),jQuery("#records_tabs").css("margin-left","")),go_make_select2_filter("user_go_sections","reader",!0),go_make_select2_filter("user_go_groups","reader",!0),go_make_select2_filter("go_badges","reader",!0),go_clipboard_stats_datatable(),go_setup_filter_buttons(!1)}function go_cache_menu(e,t){sessionStorage.setItem("go_menu_"+t,JSON.stringify(e))}function go_get_menu_data(e){jQuery.ajax({type:"get",url:MyAjax.ajaxurl,data:{action:"go_clipboard_save_filters",section:section,badge:badge,group:group,unmatched:unmatched},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){return go_after_ajax(),e}})}function go_toggle(e){checkboxes=jQuery(".go_checkbox");for(var t=0,o=checkboxes.length;t<o;t++)checkboxes[t].checked=e.checked}function go_clipboard_callback(){console.log("go_clipboard_callback"),jQuery("#go_leaderboard_filters").css("display","flex"),go_stats_links(),jQuery(".go_messages_icon_multiple_clipboard").parent().prop("onclick",null).off("click"),jQuery(".go_messages_icon_multiple_clipboard").parent().one("click",(function(e){go_messages_opener(null,null,"multiple_messages",this)})),go_activate_tippy();var e=jQuery("#records_tabs").find("[aria-selected='true']").attr("aria-controls"),t;if("single_quest"===(t=jQuery("#go_leaderboard_filters").data("type"))&&(e="clipboard_activity_wrap"),"single_store_item"===t&&(e="clipboard_store_wrap"),console.log(e),"clipboard_wrap"==e)jQuery("#go_clipboard_stats_datatable").DataTable().columns.adjust().responsive.recalc(),jQuery("#go_action_filters").hide(),jQuery(".go_apply_filters").off().one("click",(function(){Clipboard.draw(),go_clipboard_update()})),jQuery("div.dataTables_filter input").unbind(),document.querySelector("#go_clipboard_stats_datatable_filter input").onsearch=function(e){Clipboard.search(this.value).draw()};else if("clipboard_store_wrap"==e){var t;jQuery("#quest_frontend_container").show(),jQuery("#go_clipboard_store_datatable").DataTable().columns.adjust().responsive.recalc(),"single_store_item"==(t=jQuery("#go_leaderboard_filters").data("type"))?jQuery("#go_store_filters").hide():jQuery("#go_store_filters").show(),jQuery("#go_action_filters").show(),jQuery("#go_task_filters").hide(),jQuery(".go_apply_filters").off().one("click",(function(){Store.draw(),go_clipboard_update()})),jQuery("div.dataTables_filter input").unbind(),document.querySelector("#go_clipboard_store_datatable_filter input").onsearch=function(e){Store.search(this.value).draw()}}else if("clipboard_messages_wrap"==e)jQuery("#go_clipboard_messages_datatable").DataTable().columns.adjust().responsive.recalc(),jQuery("#go_action_filters").show(),jQuery("#go_store_filters").hide(),jQuery("#go_task_filters").hide(),jQuery(".go_apply_filters").off().one("click",(function(){Messages.draw(),go_clipboard_update()})),jQuery("div.dataTables_filter input").unbind(),document.querySelector("#go_clipboard_messages_datatable_filter input").onsearch=function(e){Messages.search(this.value).draw()};else if("clipboard_activity_wrap"==e){var t;console.log("recalculate clipboard_activity_wrap"),jQuery("#quest_frontend_container").show(),jQuery("#go_clipboard_activity_datatable").DataTable().columns.adjust().responsive.recalc(),"single_quest"==(t=jQuery("#go_leaderboard_filters").data("type"))?jQuery("#go_action_filters").hide():jQuery("#go_action_filters").show(),jQuery("#go_store_filters").hide(),jQuery("#go_task_filters").show(),jQuery("#go_task_filters").show(),jQuery(".go_apply_filters").off().one("click",(function(){Activity.draw(),go_clipboard_update()})),jQuery("div.dataTables_filter input").unbind(),document.querySelector("#go_clipboard_activity_datatable_filter input").onsearch=function(e){Activity.search(this.value).draw()},go_enable_reset_buttons()}else"clipboard_attendance_wrap"==e&&(jQuery("#go_clipboard_attendance_datatable").DataTable().columns.adjust().responsive.recalc(),jQuery("#go_action_filters").show(),jQuery("#go_store_filters").hide(),jQuery("#go_task_filters").hide(),jQuery(".go_apply_filters").off().one("click",(function(){Attendance.draw(),go_clipboard_update()})),jQuery("div.dataTables_filter input").unbind(),document.querySelector("#go_clipboard_attendance_datatable_filter input").onsearch=function(e){Attendance.search(this.value).draw()},go_enable_reset_buttons());jQuery("#loader_container").remove()}function go_clipboard_update(){console.log("go_clipboard_update"),go_save_filters("clipboard"),jQuery(".go_apply_filters").removeClass("bluepulse"),jQuery(".go_apply_filters").html('<span class="ui-button-text">Refresh Data <span class="dashicons dashicons-update" style="vertical-align: center;"></span></span>');var e=jQuery("#records_tabs").find("[aria-selected='true']").attr("aria-controls");"clipboard_wrap"==e?(jQuery("#go_clipboard_store_datatable").remove(),jQuery("#go_clipboard_messages_datatable").remove(),jQuery("#go_clipboard_activity_datatable").remove(),jQuery("#go_clipboard_attendance_datatable").remove()):"clipboard_store_wrap"==e?(jQuery("#go_clipboard_stats_datatable").remove(),jQuery("#go_clipboard_messages_datatable").remove(),jQuery("#go_clipboard_activity_datatable").remove(),jQuery("#go_clipboard_attendance_datatable").remove()):"clipboard_messages_wrap"==e?(jQuery("#go_clipboard_stats_datatable").remove(),jQuery("#go_clipboard_store_datatable").remove(),jQuery("#go_clipboard_activity_datatable").remove(),jQuery("#go_clipboard_attendance_datatable").remove()):"clipboard_activity_wrap"==e?(jQuery("#go_clipboard_stats_datatable").remove(),jQuery("#go_clipboard_store_datatable").remove(),jQuery("#go_clipboard_messages_datatable").remove(),jQuery("#go_clipboard_attendance_datatable").remove()):"clipboard_attendance_wrap"==e&&(jQuery("#go_clipboard_stats_datatable").remove(),jQuery("#go_clipboard_store_datatable").remove(),jQuery("#go_clipboard_messages_datatable").remove(),jQuery("#go_clipboard_activity_datatable").remove())}function go_clipboard_stats_datatable(e){if(0==jQuery("#go_clipboard_stats_datatable").length||1==e){jQuery("#clipboard_stats_datatable_container").html("<h2>Loading . . .</h2>");var t=GO_CLIPBOARD_DATA.nonces.go_clipboard_stats;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,is_frontend:is_frontend,action:"go_clipboard_stats",refresh:e},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),console.log("success"),-1!==e&&(jQuery("#clipboard_stats_datatable_container").html(e),Clipboard=jQuery("#go_clipboard_stats_datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_clipboard_stats_dataloader_ajax",data:function(e){e.section=jQuery("#go_reader_user_go_sections_select").val(),e.group=jQuery("#go_reader_user_go_groups_select").val(),e.badge=jQuery("#go_reader_go_badges_select").val()}},bPaginate:!0,order:[[6,"desc"]],responsive:!0,autoWidth:!1,stateSave:!0,stateLoadParams:function(e,t){t.search&&delete t.search,t.start&&delete t.start},stateDuration:31557600,searchDelay:1e3,dom:"lBfrtip",drawCallback:function(e){go_clipboard_callback()},columnDefs:[{type:"natural",targets:"_all"},{targets:[0],className:"noVis",width:"1px",sortable:!1},{targets:[1],className:"noVis",width:"20px",sortable:!1},{targets:[7],sortable:!1}],buttons:[{text:'<span class="go_messages_icon_multiple_clipboard">Message <i class="fas fa-bullhorn" aria-hidden="true"></i><span>',action:function(e,t,o,a){}},{extend:"collection",text:"Export ...",buttons:[{extend:"pdf",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"},orientation:"landscape"},{extend:"excel",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}},{extend:"csv",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}}]},{extend:"colvis",columns:":not(.noVis)",postfixButtons:["colvisRestore"],text:"Column Visibility"}]}))}})}else go_clipboard_callback()}function go_clipboard_store_datatable(e){if(0==jQuery("#go_clipboard_store_datatable").length||1==e){if(jQuery("#clipboard_store_datatable_container").html("<h2>Loading . . .</h2>"),
"true"===is_frontend)var t=GO_CLIPBOARD_DATA_frontend.nonces.go_clipboard_store;else if("false"===is_frontend)var t=GO_CLIPBOARD_DATA.nonces.go_clipboard_store;jQuery.ajax({url:MyAjax.ajaxurl,type:"post",data:{_ajax_nonce:t,action:"go_clipboard_store",is_frontend:is_frontend},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),go_clipboard_callback()},success:function(e){go_after_ajax(),-1!==e&&(jQuery("#clipboard_store_datatable_container").html(e),Store=jQuery("#go_clipboard_store_datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_clipboard_store_dataloader_ajax",data:function(e){e.date=jQuery("#go_datepicker").html(),e.section=jQuery("#go_reader_user_go_sections_select").val(),e.group=jQuery("#go_reader_user_go_groups_select").val(),e.badge=jQuery("#go_reader_go_badges_select").val(),e.store_item=jQuery("#go_store_item_select").val()}},bPaginate:!0,order:[[8,"desc"]],responsive:!0,autoWidth:!1,stateSave:!0,stateLoadParams:function(e,t){t.search&&delete t.search,t.start&&delete t.start},stateDuration:31557600,searchDelay:1e3,dom:"lBfrtip",drawCallback:function(e){go_clipboard_callback()},columnDefs:[{type:"natural",targets:"_all"},{targets:[0],className:"noVis",width:"5px",sortable:!1},{targets:[1],className:"noVis",width:"20px",sortable:!1},{targets:[7],sortable:!1},{targets:[9],sortable:!0}],buttons:[{text:'<span class="go_messages_icon_multiple_clipboard">Message <i class="fas fa-bullhorn" aria-hidden="true"></i><span>',action:function(e,t,o,a){}},{extend:"collection",text:"Export ...",buttons:[{extend:"pdf",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"},orientation:"landscape"},{extend:"excel",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}},{extend:"csv",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}}]},{extend:"colvis",columns:":not(.noVis)",postfixButtons:["colvisRestore"],text:"Column Visibility"}]}))}})}else go_clipboard_callback()}function go_clipboard_messages_datatable(e){if(0==jQuery("#go_clipboard_messages_datatable").length||1==e){jQuery("#clipboard_messages_datatable_container").html("<h2>Loading . . .</h2>");var t=GO_CLIPBOARD_DATA.nonces.go_clipboard_messages;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,action:"go_clipboard_messages"},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),-1!==e&&(jQuery("#clipboard_messages_datatable_container").html(e),Messages=jQuery("#go_clipboard_messages_datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_clipboard_messages_dataloader_ajax",data:function(e){e.date=jQuery("#go_datepicker").html(),e.section=jQuery("#go_reader_user_go_sections_select").val(),e.group=jQuery("#go_reader_user_go_groups_select").val(),e.badge=jQuery("#go_reader_go_badges_select").val()}},bPaginate:!0,order:[[8,"desc"]],responsive:!0,autoWidth:!1,searchDelay:1e3,stateSave:!0,stateLoadParams:function(e,t){t.search&&delete t.search,t.start&&delete t.start},stateDuration:31557600,dom:"lBfrtip",drawCallback:function(e){go_clipboard_callback()},columnDefs:[{type:"natural",targets:"_all"},{targets:[0],className:"noVis",width:"5px",sortable:!1},{targets:[1],className:"noVis",width:"20px",sortable:!1},{targets:[7],sortable:!1},{targets:[9],sortable:!1}],buttons:[{text:'<span class="go_messages_icon_multiple_clipboard">Message <i class="fas fa-bullhorn" aria-hidden="true"></i><span>',action:function(e,t,o,a){}},{extend:"collection",text:"Export ...",buttons:[{extend:"pdf",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"},orientation:"landscape"},{extend:"excel",title:"Gameful Men Data Export",exportOptions:{columns:"thead th:not(.noExport)"}},{extend:"csv",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}}]},{extend:"colvis",columns:":not(.noVis)",postfixButtons:["colvisRestore"],text:"Column Visibility"}]}),jQuery("div.dataTables_filter input").unbind(),jQuery("div.dataTables_filter input").keyup((function(e){13===e.key&&Messages.search(this.value).draw()})))}})}else go_clipboard_callback()}function go_clipboard_activity_datatable(e){if(console.log("go_clipboard_activity_datatable"),0==jQuery("#go_clipboard_activity_datatable").length||1==e){if(jQuery("#clipboard_activity_datatable_container").html("<h2>Loading . . .</h2>"),"true"===is_frontend)var t=GO_CLIPBOARD_DATA_frontend.nonces.go_clipboard_activity;else if("false"===is_frontend)var t=GO_CLIPBOARD_DATA.nonces.go_clipboard_activity;var o=jQuery("#go_leaderboard_filters").data("type");if(console.log("type: "+o),"single_quest"==o)var a=null;else var a=jQuery("#go_datepicker").html();jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,action:"go_clipboard_activity",date:a},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){if(go_after_ajax(),-1!==e){jQuery("#clipboard_activity_datatable_container").html(e),Activity=jQuery("#go_clipboard_activity_datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_clipboard_activity_dataloader_ajax",data:function(e){var t=go_loader_html("tiny"),o;if(jQuery(".quest_stats_num").html(t),"single_quest"==jQuery("#go_leaderboard_filters").data("type"))var a=null,r=jQuery("#go_leaderboard_filters").data("tasks");else var a=jQuery("#go_datepicker").html(),r=jQuery("#go_task_select").val();e.date=a,e.section=jQuery("#go_reader_user_go_sections_select").val(),e.group=jQuery("#go_reader_user_go_groups_select").val(),e.badge=jQuery("#go_reader_go_badges_select").val(),e.tasks=r;for(var s=0,n=e.columns.length;s<n;s++)e.columns[s].search.value||delete e.columns[s].search,!0===e.columns[s].searchable&&delete e.columns[s].searchable,!0===e.columns[s].orderable&&delete e.columns[s].orderable,e.columns[s].data===e.columns[s].name&&delete e.columns[s].name;delete e.search.regex}},deferRender:!0,bPaginate:!0,order:[11,"asc"],responsive:!0,autoWidth:!1,stateSave:!0,stateLoadParams:function(e,t){t.search&&delete t.search,t.start&&delete t.start},stateDuration:31557600,dom:"lBfrtip",drawCallback:function(e){go_clipboard_callback(),jQuery(".go_blog_user_task").off().one("click",(function(){go_blog_user_task(this)})),go_clipboard_activity_stats_ajax()},columnDefs:[{type:"natural",targets:"_all"},{targets:[0],className:"noVis",width:"5px",sortable:!1},{targets:[1],className:"noVis",width:"20px",sortable:!1},{targets:[7,9,14],sortable:!1}],buttons:[{text:'<span class="go_messages_icon_multiple_clipboard">Message <i class="fas fa-bullhorn" aria-hidden="true"></i><span>',action:function(e,t,o,a){}},{text:'<span class="go_tasks_reset_multiple_clipboard">Reset <i class="fas fa-times-circle" aria-hidden="true"></i><span>',action:function(e,t,o,a){}},{extend:"collection",text:"Export ...",buttons:[{extend:"pdf",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"},orientation:"landscape"},{extend:"excel",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}},{extend:"csv",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}}]},{extend:"colvis",columns:":not(.noVis)",postfixButtons:["colvisRestore"],text:"Column Visibility"}]}),jQuery("#go_clipboard_activity_datatable .show_more").click((function(){var e;0==jQuery(this).hasClass("shown")?(jQuery(this).addClass("shown"),jQuery(this).siblings(".hidden_action").show(),jQuery(this).find(".hide_more_actions").show(),jQuery(this).find(".show_more_actions").hide()):(jQuery(this).removeClass("shown"),jQuery(this).siblings(".hidden_action").hide(),jQuery(this).find(".hide_more_actions").hide(),jQuery(this).find(".show_more_actions").show())}));var t=go_loader_html("tiny");jQuery(".quest_stats_num").html(t)}}})}else go_clipboard_callback()}function go_clipboard_activity_stats_ajax(){if(console.log("go_clipboard_activity_stats_ajax"),"true"===is_frontend)var e=GO_CLIPBOARD_DATA_frontend.nonces.go_clipboard_activity_stats_ajax;else if("false"===is_frontend)var e=GO_CLIPBOARD_DATA.nonces.go_clipboard_activity_stats_ajax;var t=jQuery("#go_reader_user_go_sections_select").val(),o=jQuery("#go_reader_user_go_groups_select").val(),a=jQuery("#go_reader_go_badges_select").val(),r=jQuery("#go_task_select").val();jQuery.ajax({type:"get",url:MyAjax.ajaxurl,data:{_ajax_nonce:e,action:"go_clipboard_activity_stats_ajax",section:t,group:o,badge:a,tasks:r},error:function(e,t,o){jQuery("#loader_container").remove(),400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log("SUCCESS go_clipboard_activity_stats_ajax"),console.log(e);var t={};try{var t=JSON.parse(e)}catch(e){t={json_status:"101",complete_num:"",started_num:"",not_started_num:""}}jQuery("#quest_complete").html(t.complete_num),jQuery("#quest_not_encountered").html(t.not_started_num),jQuery("#quest_started").html(t.started_num)}})}function go_clipboard_attendance_datatable(e){if(console.log("go_clipboard_attendance_datatable"),0==jQuery("#go_clipboard_attendance_datatable").length||1==e){jQuery("#clipboard_attendance_datatable_container").html("<h2>Loading . . .</h2>");var t=GO_CLIPBOARD_DATA.nonces.go_clipboard_attendance;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,action:"go_clipboard_attendance"},error:function(e,t,o){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){go_after_ajax(),-1!==e&&(jQuery("#clipboard_attendance_datatable_container").html(e),Attendance=jQuery("#go_clipboard_attendance_datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_clipboard_attendance_dataloader_ajax",data:function(e){e.date=jQuery("#go_datepicker").html(),e.section=jQuery("#go_reader_user_go_sections_select").val(),e.group=jQuery("#go_reader_user_go_groups_select").val(),e.badge=jQuery("#go_reader_go_badges_select").val()}},bPaginate:!0,order:[[8,"desc"]],responsive:!0,autoWidth:!1,searchDelay:1e3,stateSave:!0,stateLoadParams:function(e,t){t.search&&delete t.search,t.start&&delete t.start},stateDuration:31557600,dom:"lBfrtip",drawCallback:function(e){go_clipboard_callback()},columnDefs:[{type:"natural",targets:"_all"},{targets:[0],className:"noVis",width:"5px",sortable:!1},{targets:[1],className:"noVis",width:"20px",sortable:!1},{targets:[7],sortable:!1},{targets:[9],sortable:!1}],buttons:[{text:'<span class="go_messages_icon_multiple_clipboard">Message <i class="fas fa-bullhorn" aria-hidden="true"></i><span>',action:function(e,t,o,a){}},{extend:"collection",text:"Export ...",buttons:[{extend:"pdf",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"},orientation:"landscape"},{extend:"excel",title:"Gameful Men Data Export",exportOptions:{columns:"thead th:not(.noExport)"}},{extend:"csv",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}}]},{extend:"colvis",columns:":not(.noVis)",postfixButtons:["colvisRestore"],text:"Column Visibility"}]}),jQuery("div.dataTables_filter input").unbind(),jQuery("div.dataTables_filter input").keyup((function(e){13===e.key&&Attendance.search(this.value).draw()})))}})}else go_clipboard_callback()}jQuery(window).load((function(){jQuery(".go_str_item").off().one("click",(function(e){go_lb_opener(this)}))})),jQuery(document).ready((function(){"undefined"!=typeof go_is_store&&(jQuery("#page").css("width","100%").css("max-width","unset"),go_actions_tooltip())})),"undefined"!=typeof go_is_reader_or_blog&&jQuery(document).ready((function(){jQuery(".go_grade_scales").off().one("click",(function(){go_print_grade_scales(this)}))})),jQuery(document).ready((function(){jQuery("#go_show_private").one("click",(function(e){go_show_private(this)})),jQuery("#go_hidden_mce").remove(),jQuery("#go_hidden_mce_edit").remove(),"true"==is_frontend&&(go_blog_new_posts("true"),go_check_needs_autosave(),go_start_autosave_timer())})),jQuery(document).ready((function(){let e;go_setup_badges_page(),go_setup_groups_page(),go_activate_tippy(),"undefined"!=typeof GO_TASK_LIST&&jQuery(".page-title-action").removeAttr("href").css("cursor","pointer").on("click",(function(e){go_new_task_from_template()})),jQuery("select.select2-hidden-accessible").on("select2:closing",(function(){jQuery("body > span.select2-container.select2-container--default.select2-container--open").hide()})),jQuery("select.select2-hidden-accessible").on("select2:open",(function(){jQuery("body > span.select2-container.select2-container--default.select2-container--open").css("display","inline-block")})),go_activate_tippy(),"false"===go_debug||console.log("Game On Debug Mode On"),jQuery("#wp-admin-bar-go_add_quest_from_template, .go_add_quest_from_template").on("click",(function(e){go_new_task_from_template()})),jQuery(".go_password_change_modal").one("click",(function(e){go_update_password_lightbox()})),"undefined"!=typeof hasPassword&&(go_activate_password_checker(),jQuery("#footer-widgets").hide()),"undefined"!=typeof hideFooterWidgets&&jQuery("#footer-widgets").hide(),jQuery(".go_edit_frontend_task").off().one("click",(function(){go_edit_frontend(this)}))})),jQuery(document).ready((function(){console.log("go_feedback is Ready."),"undefined"!=typeof IsReader&&go_activate_reader()})),function(e){"use strict";e.fn.fitVids=function(t){var o={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var a=document.head||document.getElementsByTagName("head")[0],r=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",s=document.createElement("div");s.innerHTML='<p>x</p><style id="fit-vids-style">'+r+"</style>",a.appendChild(s.childNodes[1])}return t&&e.extend(o,t),this.each((function(){var t=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];o.customSelector&&t.push(o.customSelector);var a=".fitvidsignore";o.ignore&&(a=a+", "+o.ignore);var r=e(this).find(t.join(","));(r=(r=r.not("object object")).not(a)).each((function(){var t=e(this);if(!(t.parents(a).length>0||"embed"===this.tagName.toLowerCase()&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)){t.css("height")||t.css("width")||!isNaN(t.attr("height"))&&!isNaN(t.attr("width"))||(t.attr("height",9),t.attr("width",16));var o,r,s=("object"===this.tagName.toLowerCase()||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height())/(isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10));if(!t.attr("name")){var n="fitvid"+e.fn.fitVids._count;t.attr("name",n),e.fn.fitVids._count++}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*s+"%"),t.removeAttr("height").removeAttr("width")}}))}))},e.fn.fitVids._count=0}(window.jQuery||window.Zepto),jQuery(window).ready((function(){go_Vids_Fit_and_Box("body"),go_help_vid()})),"undefined"!=typeof go_is_map&&jQuery(document).ready((function(){jQuery("#go_map_container").length>0&&jQuery("body").show((function(){go_setup_map()}))})),jQuery(document).ready((function(){var e;(jQuery("body").hasClass("logged-in")||jQuery("body").hasClass("wp-admin"))&&("undefined"!=typeof go_debug&&"false"==go_debug&&jQuery(window).focus((function(){clearInterval(e),e=setInterval(go_check_messages_ajax,2e4)})).blur((function(){clearInterval(e)})))})),jQuery(document).ready((function(){"undefined"!=typeof GO_CLIPBOARD_DATA&&go_setup_clipboard()})),jQuery(document).ready((function(e){if("undefined"!=typeof acf){jQuery(".taxonomy-task_chains .term-parent-wrap").remove(),jQuery(".taxonomy-store_types .term-parent-wrap").remove(),jQuery(".taxonomy-go_badges .term-parent-wrap").remove(),jQuery(".taxonomy-user_go_groups .term-parent-wrap").remove(),jQuery(".term-php .acf-field-5e37cdfe1f357").remove(),jQuery(".term-php .acf-field-5e389128e24ab").remove(),jQuery(".term-php .acf-field-5e37bb8f5b17c").remove(),jQuery(".term-php .acf-field-5e35979c47071").remove();var t=GO_ACF_DATA.go_store_toggle,o=GO_ACF_DATA.go_map_toggle,a=GO_ACF_DATA.go_gold_toggle,r=GO_ACF_DATA.go_xp_toggle,s=GO_ACF_DATA.go_health_toggle,n=GO_ACF_DATA.go_badges_toggle;0==a&&(jQuery(".go_gold").hide(),jQuery('.acf-th[data-name="gold"]').hide()),jQuery(),0==r&&(jQuery(".go_xp").hide(),jQuery('.acf-th[data-name="xp"]').hide()),0==s&&(jQuery(".go_health").hide(),jQuery('.acf-th[data-name="health"]').hide()),0==n&&(jQuery(".go_badges").hide(),jQuery('option[value="go_badge_lock"]').hide()),0==r&&(jQuery(".go_xp").hide(),jQuery('.acf-th[data-name="xp"]').hide()),jQuery('a[href="post-new.php?post_type=tasks"]').removeAttr("href").click((function(){go_new_task_from_template()}))}}));