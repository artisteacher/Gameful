function go_save_admin_archive(){console.log("go_save_admin_archive");for(var e=jQuery(".go_checkbox:visible"),t=[],a=0;a<e.length;a++)if(!0===e[a].checked){var o=e[a].getAttribute("data-uid");t.push({uid:o})}let r;if(t.length<=0)return Swal.fire({title:"Error",text:"No users were selected.",type:"error",showCancelButton:!1}),void jQuery(".go_save_icon_multiple_clipboard").parent().off().one("click",function(e){go_save_admin_archive()});Swal.fire({title:"Select Archive Type",html:"What type of archive would you like to create? <br><br>A public archive will only have blog posts that are publicly available.<br><br>A private archive includes all posts, including private posts, as well as the feedback.",type:"warning",showCancelButton:!0,confirmButtonText:"Private Archive",cancelButtonText:"Public Archive",focusConfirm:!1,focusCancel:!0,reverseButtons:!1,cancelButtonColor:"#3085d6"}).then(e=>{if(e.value)var a="private";else if(e.dismiss===Swal.DismissReason.cancel)var a="public";Swal.fire({title:"Generating Archives . . .",showCloseButton:!1,showCancelButton:!1,showConfirmButton:!1,allowEscapeKey:!1,allowOutsideClick:!1,html:'<div id="go_archive_bar_border" class="progress-bar-border-swal" style="width: 100%"><div id="go_archive_bar_progress" class="archive_progress_bar" style="width: 0%;"></div></div><div><h3 id="archive_status_text"></h3></div>',onBeforeOpen:()=>{}}),go_create_user_list(a,t)})}function go_create_user_list(e,t){console.log("go_create_user_list");var a=go_create_user_list_nonce;let o=jQuery("#go_page_user_go_sections_select").val(),r=jQuery("#go_page_user_go_groups_select").val(),s=jQuery("#go_page_go_badges_select").val();var l={action:"go_create_user_list",archive_type:e,is_admin_archive:!0,archive_vars:t,section:o,group:r,badge:s,_ajax_nonce:a};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:l,error:function(e,t,a){console.log("error"),jQuery(".go_save_icon_multiple_clipboard").parent().off().one("click",function(e){go_save_admin_archive()}),Swal.fire({title:"Error",text:"There was a problem creating your archive.",type:"error",showCancelButton:!1}),console.log("error1")},success:function(a){if(console.log(a),0==a||"0"==a)Swal.fire({title:"Error",text:"There was a problem creating your archive.",type:"error",showCancelButton:!1}),console.log("error2");else{console.log("3"),console.log("archive_vars"),console.log(t);let a=0;var o=0,r=t.length;go_generate_user_archive(e,t,0,r,0)}}})}function go_generate_user_archive(e,t,a,o,r){console.log("go_generate_multi_user_archives"),console.log("total_users: "+o),console.log("users_done:"+a);let s=a/o*100;s+="%",jQuery("#go_archive_bar_progress").css("width",s);let l=a+" of "+o+" archives created.";jQuery("#archive_status_text").html(l);var i=t[a].uid,n=go_make_user_archive_zip_nonce;let c=jQuery("#go_page_user_go_sections_select").val(),_=jQuery("#go_page_user_go_groups_select").val(),u=jQuery("#go_page_go_badges_select").val();var g={action:"go_make_user_archive_zip",archive_type:e,is_admin_archive:!0,user_id:i,section:c,group:_,badge:u,_ajax_nonce:n};jQuery.ajax({url:MyAjax.ajaxurl,type:"POST",data:g,error:function(s,l,i){console.log("error"),r++,++a<o?go_generate_user_archive(e,t,a,o):(go_zip_archive(),jQuery(".go_save_icon_multiple_clipboard").parent().off().one("click",function(e){go_save_admin_archive()}))},success:function(s){0!=s&&"0"!=s||r++,++a<o?go_generate_user_archive(e,t,a,o):(jQuery("#archive_status_text").html("Preparing files for download."),go_zip_archive(),jQuery(".go_save_icon_multiple_clipboard").parent().off().one("click",function(e){go_save_admin_archive()}))}})}function go_blog_archive_datatable(e){if(0==jQuery("#go_clipboard_stats_datatable").length||1==e){jQuery("#clipboard_stats_datatable_container").html("<h2>Loading . . .</h2>");var t=go_clipboard_stats_nonce;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,action:"go_clipboard_stats",refresh:e},error:function(e,t,a){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){-1!==e&&(jQuery("#clipboard_stats_datatable_container").html(e),Clipboard=jQuery("#go_clipboard_stats_datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_clipboard_stats_dataloader_ajax",data:function(e){e.section=jQuery("#go_page_user_go_sections_select").val(),e.group=jQuery("#go_page_user_go_groups_select").val(),e.badge=jQuery("#go_page_go_badges_select").val()}},bPaginate:!0,order:[[6,"desc"]],responsive:!0,autoWidth:!1,stateSave:!0,stateLoadParams:function(e,t){t.search&&delete t.search,t.start&&delete t.start},stateDuration:31557600,searchDelay:1e3,dom:"lBfrtip",drawCallback:function(e){go_clipboard_callback(),jQuery(".go_save_icon_multiple_clipboard").parent().one("click",function(e){go_save_admin_archive()})},columnDefs:[{type:"natural",targets:"_all"},{targets:[0],className:"noVis",width:"1px",sortable:!1},{targets:[1],className:"noVis",width:"20px",sortable:!1},{targets:[7],sortable:!1},{targets:[8]},{targets:[13]}],buttons:[{text:'<span class="go_save_icon_multiple_clipboard">Archive Selected Users <i class="fas fa-save" aria-hidden="true"></i><span>',action:function(e,t,a,o){}},{extend:"colvis",columns:":not(.noVis)",postfixButtons:["colvisRestore"],text:"Column Visibility"}]}))}})}else go_clipboard_callback(),jQuery(".go_save_icon_multiple_clipboard").parent().one("click",function(e){go_save_admin_archive()})}function go_acf_repeater_accordion(){jQuery(".go_acf_header").one("click",function(e){console.log("collapse repeater"),jQuery(".go_acf_header").off(),jQuery(e.target).is("input, textarea")?(console.log("prevent collapse"),e.preventDefault()):jQuery(this).closest(".acf-row").find(".-collapse").trigger("click"),go_acf_repeater_accordion()})}function set_height_mce(){jQuery(".go_call_to_action .mce-edit-area iframe").height(100)}function go_hide_child_tax_acfs(){if(jQuery(".edit-tags-php.taxonomy-task_chains #parent").length)jQuery('select option:contains("None")').text("NEW MAP"),jQuery(".term-parent-wrap p").html("Select the map for this Map Section (aka: quest chain). If no parent map is selected, then this will be a new map.");else if(jQuery(".edit-tags-php.taxonomy-go_badges #parent").length){jQuery('select option:contains("None")').text("NEW "+go_badge_name+" CATEGORY");var e=go_badge_name.toLowerCase();jQuery(".term-parent-wrap p").html("Choose a category for this "+e+". If no category is selected, this will be a new category.")}else if(jQuery(".edit-tags-php.taxonomy-user_go_groups #parent").length){jQuery('select option:contains("None")').text("NEW "+go_group_name+" CATEGORY");var t=go_group_name.toLowerCase();jQuery(".term-parent-wrap p").html("Choose a category for this "+t+". If no category is selected, this will be a new category.")}else if(jQuery(".term-php.taxonomy-task_chains #parent").length)jQuery(".term-parent-wrap p").html("Choose a map for this Map Section.");else if(jQuery(".term-php.taxonomy-go_badges #parent").length){var e=go_badge_name.toLowerCase();jQuery(".term-parent-wrap p").html("Choose a category for this "+e+".")}else if(jQuery(".term-php.taxonomy-user_go_groups #parent").length){var t=go_group_name.toLowerCase();jQuery(".term-parent-wrap p").html("Choose a category for this "+t+".")}-1==jQuery(".taxonomy-task_chains #parent, .taxonomy-go_badges #parent, .taxonomy-user_go_groups #parent, .term-php.taxonomy-store_types #parent").val()?(jQuery(".go_child_term").hide(),jQuery("#go_map_shortcode_id").show()):(jQuery(".go_child_term").show(),jQuery("#go_map_shortcode_id").hide()),jQuery(".term-php").length&&(-1==jQuery(".term-php.taxonomy-task_chains #parent, .term-php.taxonomy-go_badges #parent, .term-php.taxonomy-user_go_groups #parent, .term-php.taxonomy-store_types #parent").val()?jQuery(".term-parent-wrap").hide():(jQuery('.term-parent-wrap #parent option[value="-1"]').remove(),jQuery(".term-parent-wrap").show()));var a=jQuery('[name="tag_ID"]').val();null==a&&jQuery("#go_map_shortcode_id").hide();var o=jQuery("#post_ID").val();jQuery("#go_store_item_id .acf-input").each(function(){let e=jQuery(this).html();e=e.replace(new RegExp("{item_id}","g"),o),jQuery(this).html(e)});var r=jQuery("#name").val();jQuery("#go_map_shortcode_id .acf-input").each(function(){let e=jQuery(this).html();e=e.replace(new RegExp("{map_id}","g"),a),jQuery(this).html(e),e=e.replace(new RegExp("{map_url}","g"),map_url),jQuery(this).html(e),e=e.replace(new RegExp("{map_name}","g"),r),jQuery(this).html(e)}),go_activate_tippy(),null==a&&jQuery("#go_map_shortcode_id").hide()}function go_cache_menu(e,t){sessionStorage.setItem("go_menu_"+t,JSON.stringify(e))}function go_get_menu_data(e){jQuery.ajax({type:"get",url:MyAjax.ajaxurl,data:{action:"go_clipboard_save_filters",section:section,badge:badge,group:group,unmatched:unmatched},error:function(e,t,a){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){return e}})}function go_toggle(e){checkboxes=jQuery(".go_checkbox");for(var t=0,a=checkboxes.length;t<a;t++)checkboxes[t].checked=e.checked}function go_clipboard_callback(){go_stats_links(),jQuery(".go_messages_icon_multiple_clipboard").parent().prop("onclick",null).off("click"),jQuery(".go_messages_icon_multiple_clipboard").parent().one("click",function(e){go_messages_opener(null,null,"multiple_messages",this)}),go_activate_tippy();var e=jQuery("#records_tabs").find("[aria-selected='true']").attr("aria-controls");console.log(e),"clipboard_wrap"==e?(jQuery("#go_clipboard_stats_datatable").DataTable().columns.adjust().responsive.recalc(),jQuery("#go_action_filters").hide(),jQuery(".go_apply_filters").prop("onclick",null).off("click"),jQuery(".go_apply_filters").one("click",function(){Clipboard.draw(),go_clipboard_update()}),jQuery("div.dataTables_filter input").unbind(),document.querySelector("#go_clipboard_stats_datatable_filter input").onsearch=function(e){Clipboard.search(this.value).draw()}):"clipboard_store_wrap"==e?(jQuery("#go_clipboard_store_datatable").DataTable().columns.adjust().responsive.recalc(),jQuery("#go_action_filters").show(),jQuery("#go_store_filters").show(),jQuery("#go_task_filters").hide(),jQuery(".go_apply_filters").prop("onclick",null).off("click"),jQuery(".go_apply_filters").one("click",function(){Store.draw(),go_clipboard_update()}),jQuery("div.dataTables_filter input").unbind(),document.querySelector("#go_clipboard_store_datatable_filter input").onsearch=function(e){Store.search(this.value).draw()}):"clipboard_messages_wrap"==e?(jQuery("#go_clipboard_messages_datatable").DataTable().columns.adjust().responsive.recalc(),jQuery("#go_action_filters").show(),jQuery("#go_store_filters").hide(),jQuery("#go_task_filters").hide(),jQuery(".go_apply_filters").prop("onclick",null).off("click"),jQuery(".go_apply_filters").one("click",function(){Messages.draw(),go_clipboard_update()}),jQuery("div.dataTables_filter input").unbind(),document.querySelector("#go_clipboard_messages_datatable_filter input").onsearch=function(e){Messages.search(this.value).draw()}):"clipboard_activity_wrap"==e&&(jQuery("#go_clipboard_activity_datatable").DataTable().columns.adjust().responsive.recalc(),jQuery("#go_action_filters").show(),jQuery("#go_store_filters").hide(),jQuery("#go_task_filters").show(),jQuery(".go_apply_filters").prop("onclick",null).off("click"),jQuery(".go_apply_filters").one("click",function(){Activity.draw(),go_clipboard_update()}),jQuery("div.dataTables_filter input").unbind(),document.querySelector("#go_clipboard_activity_datatable_filter input").onsearch=function(e){Activity.search(this.value).draw()},go_enable_reset_buttons())}function go_clipboard_update(){console.log("go_clipboard_update"),go_save_filters(),jQuery(".go_apply_filters").removeClass("bluepulse"),jQuery(".go_apply_filters").html('<span class="ui-button-text">Refresh Data <span class="dashicons dashicons-update" style="vertical-align: center;"></span></span>');var e=jQuery("#records_tabs").find("[aria-selected='true']").attr("aria-controls");"clipboard_wrap"==e?(jQuery("#go_clipboard_store_datatable").remove(),jQuery("#go_clipboard_messages_datatable").remove()):"clipboard_store_wrap"==e?(jQuery("#go_clipboard_stats_datatable").remove(),jQuery("#go_clipboard_messages_datatable").remove()):"clipboard_messages_wrap"==e&&(jQuery("#go_clipboard_stats_datatable").remove(),jQuery("#go_clipboard_store_datatable").remove())}function go_save_filters(){console.log("go_save_clipboard_filters");var e=jQuery("#go_page_user_go_sections_select").val(),t=jQuery("#go_page_user_go_sections_select option:selected").text(),a=jQuery("#go_page_user_go_groups_select").val(),o=jQuery("#go_page_user_go_groups_select option:selected").text(),r=jQuery("#go_page_go_badges_select").val(),s=jQuery("#go_page_go_badges_select option:selected").text(),l=document.getElementById("go_unmatched_toggle").checked;localStorage.setItem("user_go_sections",e),localStorage.setItem("go_badges",r),localStorage.setItem("user_go_groups",a),localStorage.setItem("user_go_sections_name",t),localStorage.setItem("go_badges_name",s),localStorage.setItem("user_go_groups_name",o),localStorage.setItem("go_unmatched",l)}function go_clipboard_stats_datatable(e){if(0==jQuery("#go_clipboard_stats_datatable").length||1==e){jQuery("#clipboard_stats_datatable_container").html("<h2>Loading . . .</h2>");var t=GO_CLIPBOARD_DATA.nonces.go_clipboard_stats;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,action:"go_clipboard_stats",refresh:e},error:function(e,t,a){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){console.log("success"),-1!==e&&(jQuery("#clipboard_stats_datatable_container").html(e),Clipboard=jQuery("#go_clipboard_stats_datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_clipboard_stats_dataloader_ajax",data:function(e){e.section=jQuery("#go_page_user_go_sections_select").val(),e.group=jQuery("#go_page_user_go_groups_select").val(),e.badge=jQuery("#go_page_go_badges_select").val()}},bPaginate:!0,order:[[6,"desc"]],responsive:!0,autoWidth:!1,stateSave:!0,stateLoadParams:function(e,t){t.search&&delete t.search,t.start&&delete t.start},stateDuration:31557600,searchDelay:1e3,dom:"lBfrtip",drawCallback:function(e){go_clipboard_callback()},columnDefs:[{type:"natural",targets:"_all"},{targets:[0],className:"noVis",width:"1px",sortable:!1},{targets:[1],className:"noVis",width:"20px",sortable:!1},{targets:[7],sortable:!1}],buttons:[{text:'<span class="go_messages_icon_multiple_clipboard">Message <i class="fas fa-bullhorn" aria-hidden="true"></i><span>',action:function(e,t,a,o){}},{extend:"collection",text:"Export ...",buttons:[{extend:"pdf",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"},orientation:"landscape"},{extend:"excel",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}},{extend:"csv",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}}]},{extend:"colvis",columns:":not(.noVis)",postfixButtons:["colvisRestore"],text:"Column Visibility"}]}))}})}else go_clipboard_callback()}function go_clipboard_store_datatable(e){if(0==jQuery("#go_clipboard_store_datatable").length||1==e){jQuery("#clipboard_store_datatable_container").html("<h2>Loading . . .</h2>");var t=GO_CLIPBOARD_DATA.nonces.go_clipboard_store;jQuery.ajax({url:MyAjax.ajaxurl,type:"post",data:{_ajax_nonce:t,action:"go_clipboard_store"},error:function(e,t,a){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}]),go_clipboard_callback()},success:function(e){-1!==e&&(jQuery("#clipboard_store_datatable_container").html(e),Store=jQuery("#go_clipboard_store_datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_clipboard_store_dataloader_ajax",data:function(e){e.date=jQuery("#go_datepicker").html(),e.section=jQuery("#go_page_user_go_sections_select").val(),e.group=jQuery("#go_page_user_go_groups_select").val(),e.badge=jQuery("#go_page_go_badges_select").val(),e.unmatched=document.getElementById("go_unmatched_toggle").checked,e.store_item=jQuery("#go_store_item_select").val()}},bPaginate:!0,order:[[8,"desc"]],responsive:!0,autoWidth:!1,stateSave:!0,stateLoadParams:function(e,t){t.search&&delete t.search,t.start&&delete t.start},stateDuration:31557600,searchDelay:1e3,dom:"lBfrtip",drawCallback:function(e){go_clipboard_callback()},columnDefs:[{type:"natural",targets:"_all"},{targets:[0],className:"noVis",width:"5px",sortable:!1},{targets:[1],className:"noVis",width:"20px",sortable:!1},{targets:[7],sortable:!1},{targets:[9],sortable:!0}],buttons:[{text:'<span class="go_messages_icon_multiple_clipboard">Message <i class="fas fa-bullhorn" aria-hidden="true"></i><span>',action:function(e,t,a,o){}},{extend:"collection",text:"Export ...",buttons:[{extend:"pdf",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"},orientation:"landscape"},{extend:"excel",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}},{extend:"csv",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}}]},{extend:"colvis",columns:":not(.noVis)",postfixButtons:["colvisRestore"],text:"Column Visibility"}]}))}})}else go_clipboard_callback()}function go_clipboard_messages_datatable(e){if(0==jQuery("#go_clipboard_messages_datatable").length||1==e){jQuery("#clipboard_messages_datatable_container").html("<h2>Loading . . .</h2>");var t=GO_CLIPBOARD_DATA.nonces.go_clipboard_messages;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,action:"go_clipboard_messages"},error:function(e,t,a){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){-1!==e&&(jQuery("#clipboard_messages_datatable_container").html(e),Messages=jQuery("#go_clipboard_messages_datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_clipboard_messages_dataloader_ajax",data:function(e){e.date=jQuery("#go_datepicker").html(),e.section=jQuery("#go_page_user_go_sections_select").val(),e.group=jQuery("#go_page_user_go_groups_select").val(),e.badge=jQuery("#go_page_go_badges_select").val(),e.unmatched=document.getElementById("go_unmatched_toggle").checked}},bPaginate:!0,order:[[8,"desc"]],responsive:!0,autoWidth:!1,searchDelay:1e3,stateSave:!0,stateLoadParams:function(e,t){t.search&&delete t.search,t.start&&delete t.start},stateDuration:31557600,dom:"lBfrtip",drawCallback:function(e){go_clipboard_callback()},columnDefs:[{type:"natural",targets:"_all"},{targets:[0],className:"noVis",width:"5px",sortable:!1},{targets:[1],className:"noVis",width:"20px",sortable:!1},{targets:[7],sortable:!1},{targets:[9],sortable:!1}],buttons:[{text:'<span class="go_messages_icon_multiple_clipboard">Message <i class="fas fa-bullhorn" aria-hidden="true"></i><span>',action:function(e,t,a,o){}},{extend:"collection",text:"Export ...",buttons:[{extend:"pdf",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"},orientation:"landscape"},{extend:"excel",title:"Gameful Men Data Export",exportOptions:{columns:"thead th:not(.noExport)"}},{extend:"csv",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}}]},{extend:"colvis",columns:":not(.noVis)",postfixButtons:["colvisRestore"],text:"Column Visibility"}]}),jQuery("div.dataTables_filter input").unbind(),jQuery("div.dataTables_filter input").keyup(function(e){13===e.key&&Messages.search(this.value).draw()}))}})}else go_clipboard_callback()}function go_clipboard_activity_datatable(e){if(0==jQuery("#go_clipboard_activity_datatable").length||1==e){jQuery("#clipboard_activity_datatable_container").html("<h2>Loading . . .</h2>");var t=GO_CLIPBOARD_DATA.nonces.go_clipboard_activity;console.log("date: "+jQuery("#go_datepicker").html()),console.log("section: "+jQuery("#go_page_user_go_sections_select").val()),console.log("group: "+jQuery("#go_page_user_go_groups_select").val()),console.log("badges: "+jQuery("#go_page_go_badges_select").val()),console.log("unmatched: "+document.getElementById("go_unmatched_toggle").checked),console.log("tasks: "+jQuery("#go_task_select").val()),jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:t,action:"go_clipboard_activity",date:jQuery("#go_datepicker").html()},error:function(e,t,a){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){-1!==e&&(jQuery("#clipboard_activity_datatable_container").html(e),Activity=jQuery("#go_clipboard_activity_datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:MyAjax.ajaxurl+"?action=go_clipboard_activity_dataloader_ajax",data:function(e){e.date=jQuery("#go_datepicker").html(),e.section=jQuery("#go_page_user_go_sections_select").val(),e.group=jQuery("#go_page_user_go_groups_select").val(),e.badge=jQuery("#go_page_go_badges_select").val(),e.unmatched=document.getElementById("go_unmatched_toggle").checked,e.tasks=jQuery("#go_task_select").val();for(var t=0,a=e.columns.length;t<a;t++)e.columns[t].search.value||delete e.columns[t].search,!0===e.columns[t].searchable&&delete e.columns[t].searchable,!0===e.columns[t].orderable&&delete e.columns[t].orderable,e.columns[t].data===e.columns[t].name&&delete e.columns[t].name;delete e.search.regex}},deferRender:!0,bPaginate:!0,order:[11,"asc"],responsive:!0,autoWidth:!1,stateLoadParams:function(e,t){t.search&&delete t.search,t.start&&delete t.start},stateDuration:31557600,dom:"lBfrtip",drawCallback:function(e){go_clipboard_callback()},columnDefs:[{type:"natural",targets:"_all"},{targets:[0],className:"noVis",width:"5px",sortable:!1},{targets:[1],className:"noVis",width:"20px",sortable:!1},{targets:[7,9,14],sortable:!1}],buttons:[{text:'<span class="go_messages_icon_multiple_clipboard">Message <i class="fas fa-bullhorn" aria-hidden="true"></i><span>',action:function(e,t,a,o){}},{text:'<span class="go_tasks_reset_multiple_clipboard">Reset <i class="fas fa-times-circle" aria-hidden="true"></i><span>',action:function(e,t,a,o){}},{extend:"collection",text:"Export ...",buttons:[{extend:"pdf",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"},orientation:"landscape"},{extend:"excel",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}},{extend:"csv",title:"Gameful Me Data Export",exportOptions:{columns:"thead th:not(.noExport)"}}]},{extend:"colvis",columns:":not(.noVis)",postfixButtons:["colvisRestore"],text:"Column Visibility"}]}),jQuery("#go_clipboard_activity_datatable .show_more").click(function(){var e;0==jQuery(this).hasClass("shown")?(jQuery(this).addClass("shown"),jQuery(this).siblings(".hidden_action").show(),jQuery(this).find(".hide_more_actions").show(),jQuery(this).find(".show_more_actions").hide()):(jQuery(this).removeClass("shown"),jQuery(this).siblings(".hidden_action").hide(),jQuery(this).find(".hide_more_actions").hide(),jQuery(this).find(".show_more_actions").show())}))}})}else go_clipboard_callback()}function go_validate_growth(){var e=jQuery("#go_levels_growth").find("input").val();isNaN(e)?jQuery("#go_levels_growth").find("input").val(Go_orgGrowth):Go_orgGrowth=e}function go_level_names(){var e=document.getElementById("go_levels_repeater").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length,t,a,o;t=0,a="",jQuery(".go_levels_repeater_names").find("input").each(function(){t++,o=a,a=jQuery(this).val(),t>1&&t!=e&&(null!=a&&""!=a||(jQuery(this).val(o),a=o))})}function go_levels_limit_each(){console.log("each");var e=document.getElementById("go_levels_repeater").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length,t=Go_orgGrowth,a=Number(jQuery("#go_first_up").find("input").val()),o=Number(jQuery("#go_levels_max").find("input").val()),r;r=0,jQuery(".go_levels_repeater_numbers").find("input").each(function(){var s;r++,s=jQuery(this).val()||0,s=parseInt(s);var l=jQuery(this).closest(".acf-row").find("span").html();console.log("row num:"+l);var i=jQuery(this).closest(".acf-row").prev().find(".go_levels_repeater_numbers").find("input").val()||0;i=parseInt(i);var n=jQuery(this).closest(".acf-row").next().find(".go_levels_repeater_numbers").find("input").val()||0;if(n=parseInt(n),1===r)jQuery(this).attr({max:0,min:0}),jQuery(this).val(0);else if(r===e-1){if(console.log("last"),jQuery(this).attr({min:i}),jQuery(this).removeAttr("max"),s<=i){let e=(l-1)*(l-2)*t/2+a+i;console.log("newVal: "+e),console.log(e),console.log("prevVal: "+i),console.log("maxVal: "+o),e-i>o?jQuery(this).val(i+o):jQuery(this).val((l-1)*(l-2)*t/2+a+i)}}else if(r===e);else if(console.log("middle"),s<n&&jQuery(this).attr({min:i,max:n}),s>n&&jQuery(this).attr({min:i}),s<=i){let e=(l-1)*(l-2)*t/2+a+i;console.log("newVal: "+e),console.log(e),console.log("prevVal: "+i),console.log("maxVal: "+o),e-i>o?jQuery(this).val(i+o):jQuery(this).val((l-1)*(l-2)*t/2+a+i)}})}function go_levels_recalc_each(){console.log("each");var e=document.getElementById("go_levels_repeater").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length,t=Go_orgGrowth,a=Number(jQuery("#go_first_up").find("input").val()),o=Number(jQuery("#go_levels_max").find("input").val()),r;r=0,jQuery(".go_levels_repeater_numbers").find("input").each(function(){r++;var s=jQuery(this).closest(".acf-row").find("span").html();console.log("row num:"+s);var l=jQuery(this).closest(".acf-row").prev().find(".go_levels_repeater_numbers").find("input").val()||0;if(l=parseInt(l),1===r)jQuery(this).attr({max:0,min:0}),jQuery(this).val(0);else if(r===e-1){console.log("last"),jQuery(this).attr({min:l}),jQuery(this).removeAttr("max");let e=(s-1)*(s-2)*t/2+a+l;console.log("newVal: "+e),console.log(e),console.log("prevVal: "+l),console.log("maxVal: "+o),e-l>o?jQuery(this).val(l+o):jQuery(this).val((s-1)*(s-2)*t/2+a+l)}else if(r===e);else{console.log("middle");let e=(s-1)*(s-2)*t/2+a+l;console.log("newVal: "+e),console.log(e),console.log("prevVal: "+l),console.log("maxVal: "+o),e-l>o?jQuery(this).val(l+o):jQuery(this).val((s-1)*(s-2)*t/2+a+l)}})}function go_flush_all_permalinks_dialog(){console.log("go_flush_all_permalinks_dialog"),swal.fire({title:"Flush all permalinks",text:"This is for the entire network.",type:"warning",showCancelButton:!0,confirmButtonText:"Flush Away",cancelButtonText:"Cancel",reverseButtons:!0,customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"}}).then(e=>{e.value?go_flush_all_permalinks():(swal.fire({title:"No action taken."}),jQuery("#go_flush_all_permalinks").one("click",function(){go_flush_all_permalinks_dialog()}))})}function go_flush_all_permalinks(){var e=GO_ADMIN_PAGE_DATA.nonces.go_flush_all_permalinks;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:e,action:"go_flush_all_permalinks"},error:function(e,t,a){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){(e="flushed")?(swal.fire("Success","Permalinks were flushed.","success"),jQuery("#go_flush_all_permalinks").one("click",function(){go_flush_all_permalinks_dialog()})):swal.fire("Error","There was an error. Please refresh the page and try again. No data was changed.","error")}})}function go_disable_game_on_this_site_dialog(){swal.fire({title:"Disable Game Features",text:"Are you sure? This can't be undone!",type:"warning",showCancelButton:!0,confirmButtonText:"Disable",cancelButtonText:"Cancel",reverseButtons:!0,customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"}}).then(e=>{e.value?go_disable_game_on_this_site():(swal.fire({text:"Your user data is safe.",title:"No action taken."}),jQuery("#go_disable_game_on_this_site").one("click",function(){go_disable_game_on_this_site_dialog()}))})}function go_disable_game_on_this_site(){var e=GO_ADMIN_PAGE_DATA.nonces.go_disable_game_on_this_site;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:e,action:"go_disable_game_on_this_site"},error:function(e,t,a){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){(e="disabled")?(swal.fire("Success","Features are disabled.","success"),jQuery("#go_disable_game_on_this_site").one("click",function(){go_disable_game_on_this_site_dialog()})):swal.fire("Error","There was an error. Please refresh the page and try again. No data was changed.","error")}})}function go_reset_all_users_dialog(){swal.fire({title:"Reset User Game Data",text:"Are you sure? This can't be undone!",type:"warning",showCancelButton:!0,confirmButtonText:"Reset All User Game Data",cancelButtonText:"Cancel",reverseButtons:!0,customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"}}).then(e=>{e.value?go_reset_all_users():(swal.fire({text:"Your user data is safe.",title:"No action taken."}),jQuery("#go_reset_all_users").one("click",function(){go_reset_all_users_dialog()}))})}function go_reset_all_users(){var e=GO_ADMIN_PAGE_DATA.nonces.go_reset_all_users;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:e,action:"go_reset_all_users"},error:function(e,t,a){400===e.status&&jQuery(document).trigger("heartbeat-tick.wp-auth-check",[{"wp-auth-check":!1}])},success:function(e){(e="reset")?(swal.fire("Success","All user game data was reset.","success"),jQuery("#go_reset_all_users").one("click",function(){go_reset_all_users_dialog()})):swal.fire("Error","There was an error. Please refresh the page and try again. No data was changed.","error")}})}function go_Vids_Fit_and_Box(e){runmefirst(e,function(){go_Max_width_and_LightboxNow()})}function runmefirst(e,t){jQuery(e).fitVids(),t()}function go_fit_and_max_only(e){go_fit_and_max_only_first(e,function(){go_Max_width()})}function go_fit_and_max_only_first(e,t){jQuery(e).fitVids(),t()}function go_video_resize(){console.log("go_video_resize");var e=jQuery(".featherlight-content .fluid-width-video-wrapper").css("padding-top"),t=jQuery(".featherlight-content .fluid-width-video-wrapper").css("width"),a=(e=parseFloat(e))/(t=parseFloat(t));console.log("Vratio:"+a);var o=jQuery(window).width();console.log("vW:"+o);var r=o,s=jQuery(window).height();console.log("vH:"+s);var l=o*a;console.log("cH1:"+l),l>s&&(l=s-50,console.log("cH2:"+l),r=l/a,console.log("cW:"+r)),jQuery(".featherlight-content").css("width",r),jQuery(".featherlight-content").css("height",l)}function go_Max_width(){var e=GO_EVERY_PAGE_DATA.go_fitvids_maxwidth;console.log("max"+e),jQuery(".fluid-width-video-wrapper:not(.fit)").each(function(){jQuery(this).wrap('<div class="max-width-video-wrapper" style="position:relative;"><div>'),jQuery(this).addClass("fit"),jQuery(".max-width-video-wrapper").css("max-width",e)}),jQuery(".wp-video:not(.fit)").each(function(){jQuery(this).wrap('<div class="max-width-video-wrapper" style="position:relative;"><div>'),jQuery(this).addClass("fit"),jQuery(".max-width-video-wrapper").css("max-width",e)})}function go_Max_width_and_LightboxNow(){var e;go_Max_width(),"1"===GO_EVERY_PAGE_DATA.go_lightbox_switch&&go_LightboxNow()}function go_LightboxNow(){jQuery(".max-width-video-wrapper:not(.wrapped):has(iframe)").each(function(){jQuery(this).prepend('<a style="display:block;" class="featherlight_wrapper_iframe" href="#" ><div style="position:absolute; width:100%; height:100%; top:0; left: 0; z-index: 1;"></div></a>'),jQuery(".max-width-video-wrapper").children().unbind(),jQuery(this).addClass("wrapped")}),jQuery('[class^="featherlight_wrapper_iframe"]').each(function(){var e=jQuery(this).parent().find(".fluid-width-video-wrapper").parent().html();jQuery(this).attr("href",'<div id="go_video_container" style=" overflow: hidden;">'+e+"</div>"),jQuery(".featherlight_wrapper_iframe").featherlight({targetAttr:"href",closeOnEsc:!0,variant:"fit_and_box",afterOpen:function(e){jQuery(".featherlight-content").css({width:"100%",overflow:"hidden"}),
jQuery(".featherlight-content iframe").attr("src",jQuery(".featherlight-content iframe").attr("src")+"&autoplay=1"),go_video_resize(),jQuery(window).resize(function(){go_video_resize()})}})});var e=setInterval(function(){jQuery(".max-width-video-wrapper:not(.wrapped):has(video)").length&&(console.log("Exists!"),clearInterval(e),jQuery(".max-width-video-wrapper:not(.wrapped):has(video)").each(function(){var e;if(null==(e=jQuery(this).find("video").attr("src")))var e=jQuery(this).find("video").find("source").attr("src");console.log("src:"+e),jQuery(this).prepend('<a href=\'#\' class=\'featherlight_wrapper_vid_shortcode\' data-featherlight=\'<div id="go_video_container" style="height: 90vh; overflow: hidden; text-align: center;"> <video controls autoplay style="height: 100%; max-width: 100%;"><source src="'+e+"\" type=\"video/mp4\">Your browser does not support the video tag.</video></div>'  data-featherlight-close-on-esc='true' data-featherlight-variant='fit_and_box native2' ><span style=\"position:absolute; width:100%; height:100%; top:0; left: 0; z-index: 4;\"></span></a> "),jQuery(this).addClass("wrapped")}))},100)}function go_help_vid(){console.log("go_help_vid"),jQuery(".go_help_vid:not(.wrapped)").each(function(){var e=jQuery(this).data("video");jQuery(this).prepend("<a style='display:block;' class='featherlight_help_vid_iframe fluid-width-video-wrapper' data-iframe='<div id=\"go_video_container\" style=\"overflow: hidden;\"><iframe  src=\"https://www.youtube.com/embed/"+e+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen"></iframe>\'</a><div><span class="go_help_info_icon" style="color: red;"><i class="fab fa-youtube"></i></span></div></a>'),jQuery(".max-width-video-wrapper").children().unbind(),jQuery(this).addClass("wrapped"),jQuery(".featherlight_help_vid_iframe").featherlight({targetAttr:"data-iframe",closeOnEsc:!0,variant:"fit_and_box",afterOpen:function(e){jQuery(".featherlight-content").css({width:"100%",overflow:"hidden"}),jQuery(".featherlight-content iframe").attr("src",jQuery(".featherlight-content iframe").attr("src")+"?autoplay=1"),go_help_video_resize(),jQuery(window).resize(function(){go_help_video_resize()})}})})}function go_help_video_resize(){console.log("go_help_video_resize");var e=jQuery(".featherlight-content iframe").height(),t=jQuery(".featherlight-content iframe").width();e=parseFloat(e),t=parseFloat(t),console.log("VratioH:"+e),console.log("VratioW:"+t);var a=e/t;console.log("Vratio:"+a);var o=jQuery(window).width();console.log("vW:"+o);var r=o,s=jQuery(window).height();console.log("vH:"+s);var l=o*a;console.log("cH1:"+l),l>s&&(l=s-50,console.log("cH2:"+l),r=l/a,console.log("cW:"+r)),jQuery(".featherlight-content").css("width",r),jQuery(".featherlight-content").css("height",l),jQuery(".featherlight").addClass("help"),jQuery(".featherlight-content iframe").css("width",r),jQuery(".featherlight-content iframe").css("height",l)}jQuery(document).ready(function(){"undefined"!=typeof is_tools_archive_page&&(jQuery("#records_tabs").length&&jQuery("#records_tabs").tabs(),go_blog_archive_datatable(),go_make_select2_filter("user_go_sections",!1,!0),go_make_select2_filter("user_go_groups",!1,!0),go_make_select2_filter("go_badges",!1,!0),jQuery(".go_save_icon_multiple_clipboard").parent().off().one("click",function(e){go_save_admin_archive()}))}),jQuery(document).ready(function(){var e,e,e;setTimeout(set_height_mce,1e3),jQuery("input,select").bind("keydown",function(e){var t;13===(e.keyCode||e.which)&&(e.preventDefault(),jQuery("input, select, textarea")[jQuery("input,select,textarea").index(this)+1].focus())}),jQuery(".go_new_task_from_template_button").one("click",function(){go_clone_post_new_menu_bar()}),(e=jQuery("h2").filter(function(){return"Personal Options"===jQuery(this).text()})).next().remove(),e.remove(),(e=jQuery("h2").filter(function(){return"About the user"===jQuery(this).text()})).next().remove(),e.remove(),(e=jQuery("h2").filter(function(){return"About Yourself"===jQuery(this).text()})).next().remove(),e.remove(),jQuery(".user-nickname-wrap, .user-url-wrap, .user-display-name-wrap").hide()}),jQuery(document).ready(function(e){if("undefined"!=typeof acf){var t=GO_ACF_DATA.go_store_toggle,a=GO_ACF_DATA.go_map_toggle,o=GO_ACF_DATA.go_gold_toggle,r=GO_ACF_DATA.go_xp_toggle,s=GO_ACF_DATA.go_health_toggle,l=GO_ACF_DATA.go_badges_toggle;0==o&&(jQuery(".go_gold").hide(),jQuery('.acf-th[data-name="gold"]').hide()),jQuery(),0==r&&(jQuery(".go_xp").hide(),jQuery('.acf-th[data-name="xp"]').hide()),0==s&&(jQuery(".go_health").hide(),jQuery('.acf-th[data-name="health"]').hide()),0==l&&(jQuery(".go_badges").hide(),jQuery('option[value="go_badge_lock"]').hide())}}),jQuery(document).ready(function(){if("undefined"!=typeof GO_CLIPBOARD_DATA){go_load_daterangepicker("clipboard"),jQuery("#records_tabs").length&&(jQuery("#records_tabs").tabs(),jQuery(".clipboard_tabs").click(function(){switch(tab=jQuery(this).attr("tab"),tab){case"clipboard":go_clipboard_stats_datatable(!1),jQuery("#go_clipboard_stats_datatable").DataTable().columns.adjust().responsive.recalc();break;case"store":go_clipboard_store_datatable(),jQuery("#go_clipboard_store_datatable").DataTable().columns.adjust().responsive.recalc(),go_make_select2_cpt("#go_store_item_select","go_store");break;case"messages":go_clipboard_messages_datatable(),jQuery("#go_clipboard_messages_datatable").DataTable().columns.adjust().responsive.recalc();break;case"activity":go_clipboard_activity_datatable(),jQuery("#go_clipboard_activity_datatable").DataTable().columns.adjust().responsive.recalc(),go_make_select2_cpt("#go_task_select","tasks");break}})),jQuery("#records_tabs").length&&jQuery("#records_tabs").css("margin-left","");var e=localStorage.getItem("go_clipboard_unmatched");1!=e&&"true"!=e||jQuery("#go_unmatched_toggle").prop("checked",!0),go_make_select2_filter("user_go_sections",!1,!0),go_make_select2_filter("user_go_groups",!1,!0),go_make_select2_filter("go_badges",!1,!0),jQuery("#go_unmatched_toggle").change(function(){go_activate_apply_filters()}),go_clipboard_stats_datatable(),go_setup_reset_filter_button(!1)}}),jQuery(document).ready(function(){if("undefined"!=typeof GO_EDIT_STORE_DATA)var e=GO_EDIT_STORE_DATA.is_store_edit;if(e){var t,a,o="<a id="+GO_EDIT_STORE_DATA.postid+" class='go_str_item ab-item' >View "+GO_EDIT_STORE_DATA.store_name+" Item</a>";jQuery("#wp-admin-bar-view").html(o)}}),jQuery(document).ready(function(){if(console.log("is_options_page"),"undefined"!=typeof go_is_options_page){var e=go_is_options_page.is_options_page;console.log(e)}e&&(console.log("is_options_page2"),Go_orgGrowth=jQuery("#go_levels_growth").find("input").val(),go_levels_limit_each(),jQuery(".go_levels_repeater_numbers").find("input").change(go_levels_limit_each),jQuery(".go_levels_repeater_names").find("input").change(go_level_names),jQuery("#go_levels_growth").find("input").change(go_validate_growth),acf.add_action("append",function(e){if(console.log("new row"),jQuery(e).closest("#go_levels_repeater").length){var t=e.find("input").first();jQuery(t).change(go_levels_limit_each);var a=e.find("input").last();jQuery(a).change(go_level_names),go_levels_limit_each(),go_level_names()}}),jQuery("#go_levels_max").append('<br><a class="acf-button button button-primary" style="float: right;" href="#">Recaculate</a><br>'),jQuery("#go_levels_max").click(function(){go_levels_recalc_each()}),jQuery(".more_info_accordian").accordion({collapsible:!0,header:"h3",active:!1,autoHeight:!1}))}),jQuery(document).ready(function(){"undefined"!=typeof go_is_tools&&(console.log("tools page loaded"),jQuery("#go_reset_all_users").one("click",function(){go_reset_all_users_dialog()}),jQuery("#go_flush_all_permalinks").one("click",function(){go_flush_all_permalinks_dialog()}),jQuery("#go_disable_game_on_this_site").one("click",function(){go_disable_game_on_this_site_dialog()}))}),jQuery(window).ready(function(){go_Vids_Fit_and_Box("body"),go_help_vid()});