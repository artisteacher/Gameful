function setParams(){var e="?";for(key in params){var t=params[key];e+=key+"="+t+"&"}return console.log("string: "+e),e.slice(0,-1)}function toggle(e){for(var t=jQuery("input[name='delete_tags[]']"),r=0,a=t.length;r<a;r++)t[r].checked=e.checked;var i=e.checked;jQuery("#cb-select-all-1").prop("checked",i),jQuery("#cb-select-all-2").prop("checked",i)}jQuery.extend({replaceTag:function(e,t,r){var a=jQuery(e),i,n=jQuery(t).clone();return r&&(newTag=n[0],newTag.className=e.className,newTag.id=jQuery(e).attr("id"),jQuery.extend(newTag.classList,e.classList),jQuery.extend(newTag.attributes,e.attributes)),a.wrapAll(n),a.contents().unwrap(),this}}),jQuery.fn.extend({replaceTag:function(e,t){return this.each((function(){jQuery.replaceTag(this,e,t)}))}});var params={};window.location.search.substr(1).split("&").forEach((function(e){params[e.split("=")[0]]=e.split("=")[1]}));var filtered_terms=["store_types","task_chains","user_go_groups","go_badges"];if(filtered_terms.includes(params.taxonomy)){var taxonomy=params.taxonomy,parent=params.parent;if(parent){var parent_data='data-value="'+parent+'"',parentName=params.parentName;if(parentName){parentName=parentName.replace(/\+/g,"&nbsp;");var parentName_data='data-value_name="'+(parentName=decodeURIComponent(parentName))+'"'}}console.log(parentName),jQuery(document.querySelector(".tablenav .bulkactions")).after('<select id="go_page_'+taxonomy+'_select" '+parent_data+parentName_data+' class="go_activate_filter"></select> <button id="js-filter" class="button go_apply_filters" type="button">Filter</button> '),go_make_select2_filter(taxonomy,"page",!1,!0);var value=decodeURIComponent(params.meta_value).replace(/\+/g," ");jQuery("#js-filter-dropdown").find('option[value="'+value+'"]').prop("selected",!0),jQuery("#js-filter").click((function(){var e=jQuery("#go_page_"+taxonomy+"_select").val(),t=jQuery("#go_page_"+taxonomy+"_select option:selected").text();e?(params.parent=encodeURIComponent(e),params.parentName=encodeURIComponent(t)):(delete params.parent,delete params.parentName),window.location.search=setParams()}))}jQuery("#cb-select-all-1").click((function(){toggle(this)})),jQuery("#cb-select-all-2").click((function(){toggle(this)})),jQuery(document).ready((function(){var e=go_loader_html("big");jQuery("#col-right").prepend('<span class="go_loading">'+e+"</span> ");var t=[];jQuery("#the-list").find("tr").each((function(){t.push(this.id)})),termDivIDs=t,console.log("termDivIDs"),console.log(termDivIDs),jQuery.ajax({type:"POST",url:ajax_url,data:{action:"check_if_parent_term",goTermDivIDs:termDivIDs},success:function(e){function r(e){var t=jQuery.parseJSON(e),a=t.new_pos;for(var i in a)if("next"!==i){var n=document.getElementById("inline_"+i);if(null!==n&&a.hasOwnProperty(i)){var s=n.querySelector(".order");if(void 0!==a[i].order){null!==s&&(s.innerHTML=a[i].order);var d=n.querySelector(".parent");null!==d&&(d.innerHTML=a[i].parent);var c=null,u=n.querySelector(".row-title");null!==u&&(c=u.innerHTML);for(var p=0;p<a[i].depth;)p++;var h=n.parentNode.querySelector(".row-title")}else null!==s&&(s.innerHTML=a[i])}}t.next?jQuery.post(ajaxurl,{action:"reordering_terms",id:t.next.id,previd:t.next.previd,nextid:t.next.nextid,start:t.next.start,excluded:t.next.excluded,tax:l},r):(setTimeout((function(){jQuery(".to-row-updating").removeClass("to-row-updating")}),500),o.removeClass("to-updating").sortable("enable"))}for(var a=jQuery.parseJSON(e),i=0;i<t.length;i++){var e=a[i],n="#"+t[i];jQuery(n).addClass(e)}jQuery("#the-list").find(".parent").each((function(e){jQuery(this).wrapInner('<div class="container parent"></div>');var t=jQuery(this).attr("id");jQuery(this).nextUntil(".parent").andSelf().wrapAll("<li id="+t+' class="sortset"></li>');var t=jQuery(this).attr("id");jQuery(this).nextUntil(".parent").wrapAll("<ul id="+t+' class="children ulSortable"></ul>'),jQuery(this).contents().unwrap()})),jQuery("#the-list").find(".child").each((function(e){jQuery(this).wrapInner('<div class="container child"></div>')})),jQuery("tbody#the-list").replaceTag("<ul>",!0),jQuery("#the-list").addClass("ulSortable",!0),jQuery("#the-list").find("tr").replaceTag("<li>",!0),jQuery("#the-list").find("td").replaceTag("<div>",!0),jQuery(".container").prepend('<div class="handleLeft"><i class="fa fa-arrows-v fa-1x" aria-hidden="true"></i></div>'),jQuery(".container.parent").append('<div class="handleRight"><i class="fa fa-chevron-up fa-1x" aria-hidden="true"></i></i></div>'),jQuery(".container.child").append('<div class="handleRight_nograb"></div>'),jQuery(".handleRight").mousedown((function(){jQuery(".child.ui-sortable-handle").css("display","none"),jQuery("body").mouseup((function(){jQuery(".child.ui-sortable-handle").css("display","block")}))}));var o=jQuery(".ulSortable"),l=jQuery('form input[name="taxonomy"]').val();o.sortable({items:"> li",cursor:"move",axis:"y",cancel:"  .inline-edit-row",distance:2,opacity:.9,tolerance:"pointer",scroll:!0,nested:"ul",containment:"parent",forceHelperSize:!0,forcePlaceholderSize:!0,cursorAt:{top:25,left:15},start:function(e,t){"undefined"!=typeof inlineEditTax&&inlineEditTax.revert(),t.placeholder.height(t.item.height()),t.item.parent().parent().addClass("dragging")},helper:function(e,t){return t.children().each((function(){jQuery(this).width(jQuery(this).width())})),t},update:function(e,t){o.sortable("disable").addClass("to-updating"),t.item.addClass("to-row-updating");var a=4,i=t.item[0].id.substr(4),n=!1,s=t.item.prev();s.length>0&&(n=s.attr("id").substr(4));var d=!1,c=t.item.next();c.length>0&&(d=c.attr("id").substr(4)),jQuery.post(ajaxurl,{action:"reordering_terms",id:i,previd:n,nextid:d,tax:l},r)}}),jQuery("#col-right thead li").each((function(e){jQuery(this).wrapInner('<div class="container term_list_header"></div>')})),jQuery("#col-right tfoot li").each((function(e){jQuery(this).wrapInner('<div class="container term_list_footer"></div>')})),jQuery("#col-right thead").wrapInner('<div class="the-list-header"></div>'),jQuery("#col-right thead").contents().unwrap(),jQuery("#col-right th").replaceTag("<div>",!0),jQuery("#col-right tfoot").wrapInner('<div class="the-list-footer"></ul>'),jQuery("#col-right tfoot").contents().unwrap(),jQuery("#col-right  .the-list-footer tr").prepend('<div class="handleLeft"></div>'),jQuery("#col-right  .the-list-header tr").prepend('<div class="handleLeft"></div>'),jQuery("#col-right  .the-list-footer tr").append('<div class="handleRight_nograb"></div>'),jQuery("#col-right  .the-list-header tr").append('<div class="handleRight_nograb"></div>'),jQuery("#col-right  .the-list-header tr").replaceTag("<div class=container>",!0),jQuery("#col-right  .the-list-header td").replaceTag("<div>",!0),jQuery("#col-right  .the-list-footer tr").replaceTag("<div class=container>",!0),jQuery("#col-right  .the-list-footer td").replaceTag("<div>",!0),jQuery("#col-right .col-wrap").css("display","block"),jQuery(".go_loading").hide();var s=jQuery("#posts").width(),d=jQuery("#pod_toggle").width(),c=jQuery("#pod_done_num").width(),u=jQuery("#pod_achievement").width(),p=jQuery("#description").width(),h=jQuery("#slug").width();jQuery("<style>.posts { width: "+s+"px; }.pod_toggle { width: "+d+"px; }.pod_done_num { width: "+c+"px; }.pod_achievement { width: "+u+"px; }.description { width: "+p+"px; }.slug { width: "+h+"px; }</style>").appendTo("head"),jQuery(".posts").css("width",s+"px"),jQuery(".pod_toggle").css("width",d+"px"),jQuery(".pod_done_num").css("width",c+"px"),jQuery(".pod_achievement").css("width",u+"px"),jQuery(".description").css("width",p+"px"),jQuery(".slug").css("width",h+"px"),jQuery("#submit").click((function(){jQuery("#col-right .col-wrap").css("display","none"),jQuery(".go_loading").show(),jQuery("#col-right").bind("DOMSubtreeModified",(function(){console.log("modified and reload"),location.reload(!0)})),1==jQuery(".term-name-wrap").hasClass("form-invalid")&&(jQuery("#col-right").unbind("DOMSubtreeModified"),jQuery("#col-right .col-wrap").css("display","block"),jQuery(".go_loading").hide()),1==jQuery(".formfield").hasClass("form-invalid")&&jQuery(".formfield").css("display","block")}))},error:function(e){console.log(e),console.log("fail")}})}));